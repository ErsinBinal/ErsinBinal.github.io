<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Oracle | Convivium_</title>
    <style>
        /* --- ATMOSFERİK STİLLER --- */
        body {
            background-color: #000;
            background-image: radial-gradient(circle at center, #111 0%, #000 100%);
            color: #0f0;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden; /* Sayfa kaydırmayı engelle */
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', Courier, monospace;
            touch-action: none; /* Mobilde sayfayı çekiştirmeyi engelle */
        }

        nav {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
        }

        nav a {
            color: #0f0;
            text-decoration: none;
            font-weight: bold;
            opacity: 0.7;
            padding: 10px; /* Mobilde parmakla basmak kolay olsun */
        }

        .oracle-container {
            text-align: center;
            padding: 20px;
            max-width: 800px;
            width: 90%;
            z-index: 5;
        }

        .matrix-display {
            font-size: 1.8rem;
            color: #0f0;
            min-height: 80px;
            margin-bottom: 2rem;
            text-shadow: 0 0 8px #0f0;
            word-wrap: break-word;
            font-weight: bold;
            line-height: 1.4;
        }

        .instruction {
            margin-bottom: 3rem;
            line-height: 1.6;
            color: #aaddaa;
            text-shadow: 0 0 2px #003300;
            font-size: 1rem;
        }

        .action-btn {
            background: rgba(0, 20, 0, 0.6);
            border: 2px solid #0f0;
            color: #0f0;
            padding: 15px 40px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-family: 'Courier New', Courier, monospace;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
            -webkit-tap-highlight-color: transparent; /* Mobilde tıklama grisini kaldır */
        }

        .action-btn:hover, .action-btn:active {
            background: #0f0;
            color: #000;
            box-shadow: 0 0 30px #0f0;
        }

        .action-btn:disabled {
            border-color: #444;
            color: #444;
            background: transparent;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* --- MOBİL UYUMLULUK (RESPONSIVE) --- */
        @media (max-width: 600px) {
            .matrix-display { font-size: 1.2rem; min-height: 60px; margin-bottom: 1rem; }
            .instruction { font-size: 0.9rem; margin-bottom: 1.5rem; }
            .action-btn { padding: 12px 25px; font-size: 1rem; width: 100%; }
            h1 { font-size: 1.5rem; }
            /* Mobilde klavye açılırsa düzen bozulmasın diye */
            .oracle-container { margin-top: -50px; }
        }

        .glitch-text { animation: glitch 0.1s infinite; }
        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }
    </style>
</head>
<body>

    <nav>
        <a href="index.html">[ < Geri ]</a>
    </nav>

    <div class="oracle-container">
        <div id="instruction-text" class="instruction">
            <p>> SİSTEM BAŞLATILDI...</p>
            <p>Kafandaki soruyu netleştir. Bu algoritma, senin şu anki <strong>fare veya parmak hareketlerinin</strong> yarattığı "kaos"u (Entropy) kullanarak kaderini hesaplayacak.</p>
            <p style="margin-top: 20px; border: 1px dashed #0f0; padding: 10px; display:inline-block; color:#fff;">
                UYARI: Sadece tek bir hakkın var.
            </p>
        </div>

        <div id="matrix-output" class="matrix-display">
            [ SİNYAL ARANIYOR... ]
        </div>

        <button id="oracle-btn" class="action-btn" onclick="initiateSequence()">Sorguyu Başlat</button>
    </div>

    <script>
        // --- 1. KONFİGÜRASYON ---
        const STORAGE_KEY = 'oracle_v3_mobile_session'; 
        const COOLDOWN_HOURS = 24; 

        // --- 2. VERİTABANI (50 YANIT) ---
        const oracleDatabase = [
            "Derleme (Compile) Başarılı. Kodun çalışmasına izin ver.",
            "Root erişimi onaylandı. Kontrol tamamen sende.",
            "Algoritma optimum çalışıyor. Tereddüt etme, çalıştır (Run).",
            "Latency (Gecikme) sıfıra indi. Şimdi tam zamanı.",
            "Patch (Yama) yüklendi. Sorun çözüldü, ilerle.",
            "Bağımlılıklar (Dependencies) doğru kurulmuş. Temel sağlam.",
            "Render işlemi tamamlandı. Sonuç kusursuz görünüyor.",
            "Bant genişliği (Bandwidth) müsait. Veriyi gönder.",
            "Sistem online. Tüm ışıklar yeşil.",
            "Ping süresi mükemmel. Bağlantı kur.",
            "Firewall (Güvenlik Duvarı) geçildi. Kapı açık.",
            "Cache (Önbellek) temizlendi. Yeni bir sayfa aç.",
            "Kernel Panic: Beklenmeyen bir değişken her şeyi çökertmek üzere.",
            "404: Aradığın cevap bu sunucuda (server) barınmıyor.",
            "Sistem aşırı yüklendi (Overload). Geri çekil ve gözlemle.",
            "Bellek Sızıntısı (Memory Leak) var. Enerjini boşa harcıyorsun.",
            "Fatal Error: Bu yolu zorlarsan veri kaybı kaçınılmaz.",
            "Sinyal gürültüye (Noise) karıştı. Anlamsızlığı zorlama.",
            "Sonsuz döngüye (Infinite Loop) giriyorsun. Çıkış koşulunu değiştir.",
            "Erişim Reddedildi (Access Denied). Yetkin yetersiz.",
            "Mavi Ekran (BSOD). Her şeyi yeniden başlatman gerekebilir.",
            "Bağlantı zaman aşımına uğradı (Time-out). Çok geç.",
            "Dosya bozuk (Corrupted). Bu fikri kurtaramazsın.",
            "Güvenlik protokolü ihlali. Hemen dur.",
            "Hayalet makinenin içinde fısıldıyor: 'Bunu yapma.'",
            "Cevap kaynak kodda (Source Code) değil, yorum satırlarında gizli.",
            "Heisenberg İlkesi: Gözlemci, sonucu değiştirir. Bakış açını değiştir.",
            "Entropi artıyor. Kaosu düzeltmeye çalışma, onu kullan.",
            "Eski bir sürümü (Rollback) geri yüklemeyi dene. İlerleme geridedir.",
            "Değişkenleri (Variables) sabitleme. Akışkan ol.",
            "Schrödinger'in Kedisi: Kutu açılana kadar her iki sonuç da doğru.",
            "Matrix'te bir hata (Glitch). Gördüklerine güvenme.",
            "Simülasyon teorisi: Bu sorunun bir anlamı var mı?",
            "Daemon arka planda çalışıyor. Sessizce bekle.",
            "Veri tabanında (Database) tutarsızlık var. İçgüdüne güven.",
            "En bariz seçeneği sil (Delete). Geriye ne kaldı?",
            "Bu hata (Bug) aslında bir özellik (Feature) olabilir mi?",
            "Sistemi hackle: Protokollerin etrafından dolaş.",
            "Çıktıyı (Output) değil, Girdiyi (Input) sorgula. Soru yanlış.",
            "Offline ol. Bazen çözüm bağlantıyı kesmektedir.",
            "Şifreyi çözmek için anahtarı (Key) kırman gerekebilir.",
            "Sandbox modunda dene. Gerçek hayata geçirmeden önce test et.",
            "Kullanıcı arayüzünü (UI) değil, altyapıyı (Backend) değiştir.",
            "Log kayıtlarını incele. Geçmişte bir ipucu var.",
            "Tek bir satır kodu değiştirirsen, tüm program değişir.",
            "Yedek (Backup) almadan risk alma.",
            "Brute Force (Kaba Kuvvet) kullanma. Daha zarif bir yol bul.",
            "Dark Web'e girme. Yüzeyde kal."
        ];

        // --- 3. ENTROPİ HAVUZU (Mouse + Touch) ---
        let entropyPool = 0;
        let interactionEvents = 0;

        // Hem Mouse hem Touch olaylarını tek fonksiyonda topluyoruz
        function collectEntropy(x, y) {
            entropyPool += (x * y) + new Date().getMilliseconds();
            interactionEvents++;
            
            const btn = document.getElementById('oracle-btn');
            if(interactionEvents % 5 === 0 && !btn.disabled) {
                const preview = document.getElementById('matrix-output');
                preview.style.opacity = 0.5;
                preview.innerText = `> ${entropyPool.toString(16).toUpperCase().slice(-8)} <`;
            }
        }

        // Mouse Dinleyicisi
        document.addEventListener('mousemove', (e) => {
            collectEntropy(e.clientX, e.clientY);
        });

        // Touch (Mobil) Dinleyicisi
        document.addEventListener('touchmove', (e) => {
            // Mobilde ilk parmağın konumunu al
            const touch = e.touches[0];
            collectEntropy(touch.clientX, touch.clientY);
        }, { passive: false }); // Performans için passive false

        // --- 4. ANA SÜREÇ ---
        function initiateSequence() {
            const btn = document.getElementById('oracle-btn');
            const output = document.getElementById('matrix-output');
            const instruction = document.getElementById('instruction-text');

            const lastVisit = localStorage.getItem(STORAGE_KEY);
            const now = new Date().getTime();

            if (lastVisit) {
                const diffHours = (now - parseInt(lastVisit)) / (1000 * 60 * 60);
                if (diffHours < COOLDOWN_HOURS) {
                    rejectUser(output, btn, instruction);
                    return;
                }
            }

            // KONTROL: Yeterli etkileşim var mı? (Mouse veya Touch)
            if (interactionEvents < 10) {
                output.innerText = "> VERİ YETERSİZ. EKRANDA GEZİN.";
                output.style.color = "#ffff00";
                setTimeout(() => { output.style.color = "#0f0"; }, 2000);
                return;
            }

            btn.disabled = true;
            btn.innerText = "HESAPLANIYOR...";
            instruction.innerHTML = "<p>> EVRENSEL ENTROPİ DEŞİFRE EDİLİYOR...</p>";
            
            let iterations = 0;
            const interval = setInterval(() => {
                output.innerText = generateRandomGarbage();
                output.classList.add('glitch-text');
                output.style.opacity = 1;
                output.style.textShadow = "0 0 15px #fff"; 
                iterations++;

                if (iterations > 30) { 
                    clearInterval(interval);
                    output.classList.remove('glitch-text');
                    selectAndTypeAnswer(output, btn, instruction);
                }
            }, 60);
        }

        function selectAndTypeAnswer(output, btn, instruction) {
            const chosenIndex = entropyPool % oracleDatabase.length;
            const finalAnswer = oracleDatabase[chosenIndex];

            localStorage.setItem(STORAGE_KEY, new Date().getTime().toString());

            output.innerText = ""; 
            let i = 0;
            output.style.color = "#fff"; 
            output.style.textShadow = "none";
            
            const typeInterval = setInterval(() => {
                output.textContent += finalAnswer.charAt(i);
                i++;
                if (i >= finalAnswer.length) {
                    clearInterval(typeInterval);
                    output.style.color = "#0f0"; 
                    output.style.textShadow = "0 0 8px #0f0";
                    instruction.innerHTML = "<p>> OTURUM SONLANDIRILDI.</p>";
                    
                    btn.innerText = "SİNYAL KESİLDİ";
                    btn.onclick = () => rejectUser(output, btn, instruction);
                    btn.disabled = false;
                }
            }, 40); 
        }

        function rejectUser(output, btn, instruction) {
            output.innerHTML = "<span style='color:#ff3333; text-shadow: 0 0 10px red;'>[ ERİŞİM REDDEDİLDİ ]</span>";
            output.classList.add('glitch-text');
            
            const messages = [
                "Aynı nehirde iki kez yıkanılmaz.",
                "Sistem seni zaten tanıdı. Git.",
                "Kader pazarlığa kapalıdır.",
                "Bağlantı koptu. Israr etme."
            ];
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            
            if(instruction) instruction.innerHTML = `<p style='color:#ff5555'>> ${randomMsg}</p>`;
            btn.innerText = "KİLİTLENDİ";
            btn.style.borderColor = "#ff3333";
            btn.style.color = "#ff3333";
            btn.style.boxShadow = "none";
        }

        function generateRandomGarbage() {
            const chars = "01$@%&!#?[]{}<>";
            let text = "";
            for (let i = 0; i < 20; i++) {
                text += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return text;
        }
    </script>
</body>
</html>
