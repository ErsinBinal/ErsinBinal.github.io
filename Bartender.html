<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Pure Mixologist | Convivium_</title>
    
    <style>
        /* ============================
           1. CYBERPUNK BASE
           ============================ */
        :root {
            --bg: #050505;
            --surface: #0e0e0e;
            --primary: #ff9900; /* Amber */
            --glass-tint: rgba(255, 153, 0, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --text: #eee;
            --font: 'Courier New', Courier, monospace;
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: var(--font);
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        body::before {
            content: ""; position: fixed; inset: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 3px;
            pointer-events: none; z-index: 99; opacity: 0.3;
        }

        .container {
            width: 90%; max-width: 500px; text-align: center;
            position: relative; z-index: 10;
            padding-bottom: 40px;
        }

        nav { position: absolute; top: 20px; left: 20px; }
        nav a { color: #666; text-decoration: none; font-size: 0.8rem; text-transform: uppercase; border:1px solid #333; padding:5px 10px; transition:0.3s; }
        nav a:hover { color: var(--primary); border-color:var(--primary); }

        /* ============================
           2. SAHNE ALANI (STAGE AREA)
           ============================ */
        .stage-area {
            height: 280px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            position: relative;
            background: radial-gradient(circle at bottom, #1a1a1a, #000 80%);
            margin-bottom: 20px;
            border-bottom: 4px solid #333;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        /* --- KATMAN 0: ARKA PLAN (SİMETRİK RAFLAR) --- */
        .bar-background {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            display: flex;
            justify-content: space-between;
            padding: 20px 10px 0 10px;
            opacity: 0.5;
            filter: blur(0.5px);
        }

        .shelf-block {
            width: 35%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding-bottom: 90px;
            position: relative;
        }

        .shelf-line {
            width: 100%; height: 4px; background: #333;
            margin-bottom: 5px;
            box-shadow: 0 2px 5px #000;
            position: relative;
        }

        .bottles-row {
            display: flex; justify-content: space-around; align-items: flex-end;
            height: 60px; margin-bottom: -4px;
            z-index: 1;
        }

        .bottle {
            background: rgba(255,255,255,0.05);
            border: 1px solid #555;
            position: relative;
        }
        .bottle::after {
            content:""; position: absolute; top:-5px; left: 50%; transform: translateX(-50%);
            width: 40%; height: 5px; background: #444;
        }

        .b-tall { width: 14px; height: 50px; border-radius: 2px; border-color: #777; }
        .b-fat { width: 20px; height: 35px; border-radius: 5px; border-color: #555; background: rgba(255,153,0,0.1); }
        .b-sq { width: 18px; height: 45px; border-radius: 0; border-color: #446; background: rgba(0,100,255,0.1); }

        .wall-texture {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background-image: linear-gradient(#111 1px, transparent 1px), linear-gradient(90deg, #111 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: -1;
            opacity: 0.3;
        }

        /* --- KATMAN 1: BEKLEYEN BARMEN (CYBER-TENDER) --- */
        .bartender-layer {
            position: absolute; bottom: 0;
            width: 100%; height: 100%;
            display: flex; align-items: flex-end; justify-content: center;
            transition: opacity 0.5s, transform 0.5s;
            z-index: 5;
        }

        .bar-counter {
            position: absolute; bottom: 0; width: 100%; height: 15px;
            background: linear-gradient(to bottom, #333, #111);
            border-top: 3px solid var(--primary);
            box-shadow: 0 0 20px rgba(255,153,0,0.2);
            z-index: 6;
        }
        
        .cyber-tender {
            width: 110px; height: 170px;
            position: relative; bottom: 15px;
            display: flex; flex-direction: column; align-items: center;
            animation: idleBreathe 4s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));
        }
        .tender-head {
            width: 55px; height: 45px;
            background: linear-gradient(135deg, #444, #222);
            border: 2px solid var(--primary); border-radius: 8px;
            position: relative;
            box-shadow: inset 0 0 10px rgba(255,153,0,0.2);
        }
        .tender-eyes {
            position: absolute; top: 15px; left: 10px; width: 30px; height: 4px;
            background: var(--primary); box-shadow: 0 0 10px var(--primary);
            animation: eyeScan 4s infinite ease-in-out;
        }
        .tender-neck { width: 20px; height: 10px; background: #333; margin-top: -2px; z-index: -1; }
        
        .tender-body {
            width: 100px; height: 115px;
            background: radial-gradient(circle at center, #333, #111);
            border: 1px solid #444; border-top: none;
            border-radius: 20px 20px 0 0;
            position: relative;
            display: flex; justify-content: center; padding-top: 20px;
        }
        .tender-body::before {
            content: ""; position: absolute; top:0; width: 40px; height: 20px;
            border-bottom: 1px solid #555;
        }
        .tender-core {
            width: 36px; height: 36px; background: rgba(255,153,0,0.1);
            border: 1px solid var(--primary); border-radius: 50%;
            box-shadow: 0 0 15px rgba(255,153,0,0.2);
            animation: corePulse 2s infinite;
        }

        /* --- KATMAN 2 & 3: SHAKER & SUNUM --- */
        .shaker-layer {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%) translateY(20px);
            opacity: 0; transition: all 0.5s; z-index: 7;
        }
        .shaker-container { width: 80px; height: 140px; position: relative; transform-origin: bottom center; }
        .shaker-body { width: 100%; height: 75%; background: linear-gradient(135deg, #555, #222); border-radius: 5px 5px 25px 25px; border: 2px solid #888; position: absolute; bottom: 0; }
        .shaker-cap { width: 100%; height: 25%; background: linear-gradient(135deg, #666, #333); border-radius: 15px 15px 5px 5px; border: 2px solid #999; border-bottom: 1px solid #222; position: absolute; top: 0; }
        .shaker-top { width: 40%; height: 15px; background: #555; position: absolute; top: -15px; left: 30%; border-radius: 5px 5px 0 0; border: 2px solid #888; }
        .is-shaking { animation: shakeHard 0.15s infinite; }

        .presentation-layer {
            position: absolute; width: 100%; height: 100%; bottom: 10px;
            display: flex; align-items: flex-end; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s; z-index: 8;
        }
        .glass-svg { width: 140px; height: 140px; fill: none; stroke: #ccc; stroke-width: 2; overflow: visible; position: relative; z-index: 2; filter: drop-shadow(0 0 5px rgba(255,255,255,0.2)); }
        .liquid-stream { position: absolute; top: 0px; width: 8px; height: 0; background: var(--primary); box-shadow: 0 0 15px var(--primary); z-index: 1; transition: height 0.5s; border-radius: 4px; }
        .liquid-fill { fill: var(--primary); opacity: 0; transition: opacity 1s, fill 0.5s; filter: drop-shadow(0 0 8px var(--primary)); }

        /* --- ANİMASYONLAR --- */
        @keyframes idleBreathe { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-2px); } }
        @keyframes eyeScan { 0%, 100% { width: 30px; left: 10px; opacity: 1; } 50% { width: 10px; left: 20px; opacity: 0.5; } }
        @keyframes corePulse { 0%, 100% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }
        @keyframes shakeHard { 0% { transform: rotate(0deg); } 25% { transform: rotate(-15deg); } 75% { transform: rotate(15deg); } 100% { transform: rotate(0deg); } }

        /* ============================
           4. UI (DİYALOG & SEÇENEKLER)
           ============================ */
        .dialogue-card { background: var(--surface); border: 1px solid var(--border); border-left: 4px solid var(--primary); padding: 20px; margin-bottom: 20px; text-align: left; min-height: 80px; }
        
        /* GÜNCELLENDİ: Daha küçük ve soluk başlık */
        .dialogue-header {
            font-size: 0.55rem;
            color: rgba(255, 255, 255, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
            display: block;
        }

        .typing-text { font-size: 1rem; line-height: 1.5; white-space: pre-wrap; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; opacity: 0; animation: fadeIn 0.5s forwards; }
        .option-btn { background: rgba(255,255,255,0.03); border: 1px solid var(--border); color: #aaa; padding: 15px; cursor: pointer; font-family: inherit; text-transform: uppercase; font-size: 0.85rem; transition: 0.2s; }
        .option-btn:hover { border-color: var(--primary); color: var(--primary); background: rgba(255,153,0,0.05); }
        
        .result-card { display: none; border: 1px solid var(--primary); background: #080808; margin-top: 20px; animation: slideUp 0.5s ease; text-align: left; }
        .result-head { background: var(--primary); color: #000; padding: 10px 15px; font-weight: bold; display: flex; justify-content: space-between; }
        .result-body { padding: 20px; }
        .recipe-list { color: #ccc; margin: 10px 0; padding-left: 20px; font-size: 0.9rem; line-height: 1.6; }
        .btn-full { display: block; width: 100%; text-align: center; padding: 12px; margin-top: 10px; text-decoration: none; border: 1px solid var(--border); color: var(--text); transition: 0.3s; font-size: 0.8rem; text-transform: uppercase; }
        .btn-full.highlight { border-color: var(--primary); color: var(--primary); font-weight: bold; }
        .btn-full:hover { background: var(--primary); color: #000; }

        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 600px) { .options-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <nav><a href="index.html">← GERİ</a></nav>

    <div class="container">
        
        <div class="stage-area">
            <div class="wall-texture"></div>

            <div class="bar-background">
                <div class="shelf-block">
                    <div class="bottles-row">
                        <div class="bottle b-tall"></div><div class="bottle b-fat"></div><div class="bottle b-sq"></div>
                    </div>
                    <div class="shelf-line"></div>
                    <div class="bottles-row">
                        <div class="bottle b-fat"></div><div class="bottle b-sq"></div>
                    </div>
                    <div class="shelf-line"></div>
                </div>
                <div class="shelf-block">
                    <div class="bottles-row">
                        <div class="bottle b-sq"></div><div class="bottle b-tall"></div>
                    </div>
                    <div class="shelf-line"></div>
                    <div class="bottles-row">
                        <div class="bottle b-tall"></div><div class="bottle b-fat"></div><div class="bottle b-sq"></div>
                    </div>
                    <div class="shelf-line"></div>
                </div>
            </div>

            <div id="bartender-layer" class="bartender-layer">
                <div class="cyber-tender">
                    <div class="tender-head"><div class="tender-eyes"></div></div>
                    <div class="tender-neck"></div>
                    <div class="tender-body"><div class="tender-core"></div></div>
                </div>
                <div class="bar-counter"></div>
            </div>

            <div id="shaker-layer" class="shaker-layer">
                <div id="shaker" class="shaker-container">
                    <div class="shaker-top"></div><div class="shaker-cap"></div><div class="shaker-body"></div>
                </div>
            </div>

            <div id="presentation-layer" class="presentation-layer">
                <div id="stream" class="liquid-stream"></div>
                <svg id="glass-icon" class="glass-svg" viewBox="0 0 100 100">
                    <path id="glass-path" d="" fill="none" stroke="currentColor" stroke-width="2"/>
                    <path id="liquid-path" class="liquid-fill" d="" />
                </svg>
            </div>

        </div>

        <div class="dialogue-card">
            <span class="dialogue-header">Cyber-Tender v4.0</span>
            <div id="dialogue-text" class="typing-text"></div>
        </div>

        <div id="options-area" class="options-grid"></div>

        <div id="result-card" class="result-card">
            <div class="result-head">
                <span id="drink-title"></span>
                <span>%98 MATCH</span>
            </div>
            <div class="result-body">
                <p id="drink-desc" style="color:#888; font-style:italic; margin-bottom:15px;"></p>
                
                <p id="drink-prep" style="color:#aaa; font-size:0.9rem; margin-bottom:15px;"></p>
                
                <strong style="color:var(--primary); font-size:0.9rem;">> MALZEMELER:</strong>
                <div id="drink-recipe" class="recipe-list"></div>
                
                <a id="price-btn" href="#" target="_blank" class="btn-full highlight">Fiyat Araştırması</a>
                <button onclick="location.reload()" class="btn-full">Yeniden Başlat</button>
            </div>
        </div>

    </div>

    <script>
        // --- SVG BARDAK YOLLARI ---
        const glassPaths = {
            martini: { path: "M10,10 L50,60 L90,10 Z M50,60 L50,95 M30,95 L70,95", fill: "M15,15 L50,55 L85,15 Z" },
            rocks: { path: "M15,20 L20,90 L80,90 L85,20 Z", fill: "M22,85 L78,85 L82,30 L18,30 Z" },
            highball: { path: "M20,10 L25,90 L75,90 L80,10 Z", fill: "M26,85 L74,85 L78,20 L22,20 Z" },
            wine: { path: "M25,10 Q25,60 50,60 Q75,60 75,10 Z M50,60 L50,95 M30,95 L70,95", fill: "M28,20 Q28,55 50,55 Q72,55 72,20 Z" },
            shot: { path: "M30,30 L35,90 L65,90 L70,30 Z", fill: "M36,85 L64,85 L68,35 L32,35 Z" }
        };

        // --- VERİTABANI (GÜNCELLENDİ: 'prep' alanı eklendi) ---
        const drinksDB = [
            { name: "OLD FASHIONED", type: "rocks", color: "#e67e22", tags: { mood: "deep", taste: "bitter", intensity: "high" }, desc: "Viskinin en saf hali.", prep: "Şekeri bitter ile ezin, buz ve viski ekleyip karıştırın. Portakal kabuğu sıkın.", recipe: "• 6cl Burbon<br>• 1 Küp Şeker<br>• Angostura Bitters", query: "viski fiyatları" },
            { name: "NEGRONI", type: "rocks", color: "#e74c3c", tags: { mood: "classy", taste: "bitter", intensity: "high" }, desc: "İtalyan asaleti.", prep: "Tüm malzemeleri buzlu bardağa dökün, karıştırın. Portakal dilimi ile süsleyin.", recipe: "• 3cl Cin<br>• 3cl Campari<br>• 3cl Vermut", query: "cin campari fiyat" },
            { name: "MARTINI", type: "martini", color: "#bdc3c7", tags: { mood: "classy", taste: "sour", intensity: "high" }, desc: "Sek ve keskin.", prep: "Cin ve vermutu buzla karıştırın (shaker kullanmayın). Soğutulmuş bardağa süzün.", recipe: "• 6cl Cin<br>• 1cl Kuru Vermut<br>• Yeşil Zeytin", query: "cin vermut fiyat" },
            { name: "MOJITO", type: "highball", color: "#2ecc71", tags: { mood: "energy", taste: "sour", intensity: "medium" }, desc: "Küba ferahlığı.", prep: "Nane, şeker ve limonu bardakta ezin. Rom ve buz ekleyin, soda ile tamamlayın.", recipe: "• 5cl Rom<br>• Nane & Limon<br>• Soda", query: "rom fiyatları" },
            { name: "WHISKEY SOUR", type: "rocks", color: "#f1c40f", tags: { mood: "relax", taste: "sour", intensity: "medium" }, desc: "Ekşi ve tatlı denge.", prep: "Tüm malzemeleri buzsuz (dry shake), sonra buzlu shakerda çalkalayın. Süzün.", recipe: "• 6cl Viski<br>• Limon Suyu<br>• Şeker", query: "viski fiyatları" },
            { name: "ESPRESSO MARTINI", type: "martini", color: "#3e2723", tags: { mood: "energy", taste: "sweet", intensity: "high" }, desc: "Uyandırır.", prep: "Tüm malzemeleri buzla shakerda sertçe çalkalayın. Soğutulmuş bardağa süzün.", recipe: "• Votka<br>• Kahve Likörü<br>• Espresso", query: "votka kahlua" },
            { name: "TEQUILA SHOT", type: "shot", color: "#f39c12", tags: { mood: "rebel", taste: "sour", intensity: "high" }, desc: "Hızlı çözüm.", prep: "Önce tuz yalayın, tekilayı için, ardından limonu ısırın.", recipe: "• Tekila<br>• Tuz<br>• Limon", query: "tekila fiyat" },
            { name: "APEROL SPRITZ", type: "wine", color: "#ff7043", tags: { mood: "relax", taste: "fruity", intensity: "low" }, desc: "İtalyan aperitifi.", prep: "Bardağı buzla doldurun. Sırasıyla Prosecco, Aperol ve sodayı ekleyip hafifçe karıştırın.", recipe: "• Prosecco<br>• Aperol<br>• Soda", query: "aperol fiyat" },
            { name: "LONG ISLAND", type: "highball", color: "#795548", tags: { mood: "rebel", taste: "sour", intensity: "high" }, desc: "Çok karışık.", prep: "Kola hariç tüm malzemeleri buzla shakerda çalkalayın. Bardağa döküp kola ekleyin.", recipe: "• 5 Çeşit Alkol<br>• Kola & Limon", query: "votka cin rom fiyat" },
            { name: "COSMOPOLITAN", type: "martini", color: "#e91e63", tags: { mood: "classy", taste: "fruity", intensity: "medium" }, desc: "Şehirli.", prep: "Tüm malzemeleri buzla shakerda çalkalayın. Soğutulmuş martini bardağına süzün.", recipe: "• Votka<br>• Portakal Likörü<br>• Kızılcık", query: "votka fiyat" }
        ];

        // --- SORULAR ---
        const questions = [
            { text: "Ruh halin nasıl?", options: [{l:"Sakin",v:"relax"}, {l:"Enerjik",v:"energy"}, {l:"Derin",v:"deep"}, {l:"Şık",v:"classy"}, {l:"Asi",v:"rebel"}], key:"mood" },
            { text: "Tat tercihin?", options: [{l:"Ekşi",v:"sour"}, {l:"Acı",v:"bitter"}, {l:"Tatlı",v:"sweet"}, {l:"Meyve",v:"fruity"}, {l:"Otlu",v:"herbal"}], key:"taste" },
            { text: "Sertlik?", options: [{l:"Hafif",v:"low"}, {l:"Orta",v:"medium"}, {l:"Sert",v:"high"}], key:"intensity" }
        ];

        let currentStep = 0;
        let userPrefs = {};
        
        const dialogue = document.getElementById('dialogue-text');
        const optArea = document.getElementById('options-area');
        const bartenderLayer = document.getElementById('bartender-layer');
        const shakerLayer = document.getElementById('shaker-layer');
        const presentationLayer = document.getElementById('presentation-layer');
        const shaker = document.getElementById('shaker');
        const stream = document.getElementById('stream');
        const glassPath = document.getElementById('glass-path');
        const liquidPath = document.getElementById('liquid-path');
        const resultCard = document.getElementById('result-card');
        const root = document.documentElement;

        function type(txt, cb) {
            dialogue.textContent = "";
            let i = 0; let currentText = "";
            let timer = setInterval(() => {
                currentText += txt.charAt(i); dialogue.textContent = currentText; i++;
                if(i >= txt.length) { clearInterval(timer); if(cb) cb(); }
            }, 30);
        }

        function setScene(scene) {
            bartenderLayer.style.opacity = 0; shakerLayer.style.opacity = 0; shakerLayer.style.transform = "translate(-50%, 20px)"; presentationLayer.style.opacity = 0; shaker.classList.remove('is-shaking');
            if(scene === 'bartender') { bartenderLayer.style.opacity = 1; }
            else if(scene === 'shaker') { shakerLayer.style.opacity = 1; shakerLayer.style.transform = "translate(-50%, 0)"; setTimeout(() => shaker.classList.add('is-shaking'), 300); }
            else if(scene === 'presentation') { presentationLayer.style.opacity = 1; }
        }

        function renderStep() {
            optArea.innerHTML = ""; optArea.style.opacity = 0; setScene('bartender');
            if(currentStep < questions.length) {
                let q = questions[currentStep];
                type(q.text, () => {
                    q.options.forEach(o => {
                        let btn = document.createElement('button'); btn.className = 'option-btn'; btn.innerText = "> " + o.l;
                        btn.onclick = () => { userPrefs[q.key] = o.v; currentStep++; renderStep(); };
                        optArea.appendChild(btn);
                    });
                    optArea.style.animation = "fadeIn 0.5s forwards";
                });
            } else { calculate(); }
        }

        function calculate() {
            type("Veriler işleniyor... Karışım hazırlanıyor...", () => {
                optArea.style.display = "none"; setScene('shaker');
                setTimeout(() => {
                    let best = drinksDB[0]; let max = -1;
                    drinksDB.forEach(d => {
                        let s = 0;
                        if(d.tags.mood == userPrefs.mood) s+=5; if(d.tags.taste == userPrefs.taste) s+=3; if(d.tags.intensity == userPrefs.intensity) s+=2;
                        s += Math.random(); if(s > max) { max = s; best = d; }
                    });
                    showResult(best);
                }, 2500);
            });
        }

        function showResult(drink) {
            setScene('presentation');
            let paths = glassPaths[drink.type] || glassPaths.rocks;
            glassPath.setAttribute('d', paths.path); liquidPath.setAttribute('d', paths.fill);
            root.style.setProperty('--primary', drink.color); stream.style.background = drink.color; stream.style.boxShadow = `0 0 10px ${drink.color}`; liquidPath.style.fill = drink.color;
            setTimeout(() => {
                stream.style.height = "100px";
                setTimeout(() => {
                    liquidPath.style.opacity = 0.8;
                    setTimeout(() => { stream.style.height = "0"; stream.style.top = "120px"; finish(drink); }, 800);
                }, 400);
            }, 300);
        }

        function finish(drink) {
            resultCard.style.display = "block";
            document.getElementById('drink-title').innerText = drink.name;
            document.getElementById('drink-desc').innerText = drink.desc;
            // GÜNCELLENDİ: Hazırlanış eklendi
            document.getElementById('drink-prep').innerText = "Hazırlanışı: " + drink.prep;
            document.getElementById('drink-recipe').innerHTML = drink.recipe;
            document.getElementById('price-btn').href = `https://www.google.com/search?q=${encodeURIComponent(drink.query + " 2026")}`;
            dialogue.textContent = "Servis edildi. Afiyet olsun.";
        }

        window.onload = () => { renderStep(); }
    </script>
</body>
</html>
