<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>The Bartender | Convivium_</title>

  <style>
    /* =========================================================
       (4) AZ AMA KARÄ°ZMA: Premium Bar + KÄ±sÄ±t EstetiÄŸi
       - Tek ana vurgu: AMBER
       - YeÅŸil SADECE "READY"
       - Efektler azaltÄ±ldÄ± (RGB yok, glitch yok)
       ========================================================= */

    :root{
      --bg: #050505;
      --panel: #090909;
      --panel2: #0c0c0c;

      --text: #d9d9d9;
      --muted: #8c8c8c;

      --amber: #ff9900;
      --ready: #0f0;

      --border: #2a2a2a;
      --border2:#3a3a3a;
      --px: 2px;
    }

    body{
      background: var(--bg);
      color: var(--text);
      font-family: ui-monospace, Menlo, Monaco, Consolas, "Courier New", monospace;
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow-x:hidden;
    }

    /* Hafif dither (retro hissi var ama baÄŸÄ±rmÄ±yor) */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1;
      opacity:0.18;
      background:
        radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 1.2px) 0 0/6px 6px;
    }

    /* Ä°nce scanline (Ã§ok dÃ¼ÅŸÃ¼k opaklÄ±k) */
    body::after{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:2;
      opacity:0.06;
      background: repeating-linear-gradient(
        to bottom,
        rgba(0,0,0,0) 0px,
        rgba(0,0,0,0) 2px,
        rgba(0,0,0,0.35) 3px
      );
    }

    nav{ position:absolute; top:20px; left:20px; z-index:10; }
    nav a{
      color: var(--amber);
      text-decoration:none;
      font-weight:bold;
      border: var(--px) solid var(--amber);
      padding:8px 14px;
      background: #000;
      text-transform: uppercase;
      font-size: 0.8rem;
      letter-spacing: 1px;
    }
    nav a:hover{
      background: var(--amber);
      color:#000;
    }

    .container{
      width: 90%;
      max-width: 600px;
      text-align:center;
      z-index:5;
      padding-bottom: 50px;
      position:relative;
    }

    /* Premium monitor frame: net border, net iÃ§ Ã§erÃ§eve */
    .monitor-frame{
      border: var(--px) solid var(--border2);
      background: var(--panel);
      padding: 16px;
      margin-bottom: 18px;
      position:relative;
      min-height: 190px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .monitor-frame::before{
      content:"";
      position:absolute;
      inset:10px;
      border: 1px solid rgba(255,255,255,0.06);
      pointer-events:none;
    }

    .status-badge{
      position:absolute;
      top:10px;
      right:10px;
      font-size:0.72rem;
      color: var(--amber);
      border: 1px solid var(--amber);
      padding:2px 6px;
      background:#000;
      opacity:0.9;
      text-transform: uppercase;
      letter-spacing: 0.6px;
    }

    .visual-display{
      font-weight:900;
      color: var(--amber);
      white-space: pre;
      font-size: 13px;
      line-height: 1.2;
      text-align:center;

      /* blur yok: daha â€œnetâ€ */
      text-shadow:
        1px 0 0 rgba(0,0,0,0.9),
        -1px 0 0 rgba(0,0,0,0.9),
        0 1px 0 rgba(0,0,0,0.9),
        0 -1px 0 rgba(0,0,0,0.9);

      user-select:none;
      transition: opacity .12s linear;
    }

    .dialogue-box{
      border: 1px solid var(--border2);
      background: var(--panel2);
      padding: 20px 16px;
      min-height: 64px;
      margin-bottom: 18px;
      text-align:left;
      position:relative;
    }

    .dialogue-label{
      position:absolute;
      top:-10px;
      left:10px;
      background: var(--bg);
      color: var(--muted);
      font-size:0.72rem;
      padding:0 6px;
    }

    .typing-text{
      font-size: 1rem;
      line-height: 1.45;
      color: var(--text);
    }

    .options-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }

    /* (5) Hover abartÄ±sÄ± yok: sadece ince â€œinvertâ€ */
    .option-btn{
      background:#000;
      border: 1px solid var(--border2);
      color: #b3b3b3;
      padding: 14px 10px;
      cursor:pointer;
      font-family:inherit;
      font-size:0.9rem;
      text-transform: uppercase;
      letter-spacing: .5px;
      transition: background .12s linear, color .12s linear, border-color .12s linear;
    }

    .option-btn:hover{
      background: rgba(255,153,0,0.10);
      border-color: var(--amber);
      color: var(--amber);
    }

    .option-btn:active{
      background: var(--amber);
      color:#000;
      border-color: var(--amber);
    }

    .result-card{
      display:none;
      text-align:left;
      border: 1px solid var(--amber);
      background:#000;
      margin-top: 18px;
    }

    .result-header{
      background: var(--amber);
      color:#000;
      padding: 10px 12px;
      font-weight:900;
      display:flex;
      justify-content: space-between;
      font-size: 1rem;
      text-transform: uppercase;
    }

    .result-body{ padding: 18px 16px; }
    .drink-desc{ margin-bottom: 14px; color: #cfcfcf; font-style: italic; font-size: 0.95rem; }

    .recipe-box{
      border-left: 3px solid var(--amber);
      padding: 10px 12px;
      margin: 14px 0;
      color: #c9c9c9;
      background: rgba(255,153,0,0.06);
      font-size: 0.92rem;
    }

    .price-btn{
      display:block;
      width:100%;
      text-align:center;
      background:#0a0a0a;
      color:#eaeaea;
      padding: 14px;
      text-decoration:none;
      border: 1px dashed #4a4a4a;
      margin-top: 16px;
      font-size: 0.9rem;
      box-sizing: border-box;
      font-weight:900;
      text-transform: uppercase;
      transition: background .12s linear, color .12s linear, border-color .12s linear;
    }
    .price-btn:hover{
      border-color: var(--amber);
      color: var(--amber);
      background: #000;
    }

    .restart-btn{
      margin-top: 12px;
      background:none;
      border: 1px solid #2a2a2a;
      color:#777;
      cursor:pointer;
      width:100%;
      padding:10px;
      font-family:inherit;
      text-transform: uppercase;
      transition: color .12s linear, border-color .12s linear;
    }
    .restart-btn:hover{
      border-color: var(--amber);
      color: var(--amber);
    }

    @media (max-width: 600px){
      .options-grid{ grid-template-columns:1fr; }
      .container{ padding-top: 60px; }
      .visual-display{ font-size: 11px; }
    }
  </style>
</head>

<body>
  <nav>
    <a href="index.html">[ < Geri ]</a>
  </nav>

  <div class="container">

    <div class="monitor-frame">
      <div id="status-badge" class="status-badge">[ BEKLÄ°YOR ]</div>
      <div id="visual-content" class="visual-display"></div>
    </div>

    <div class="dialogue-box">
      <span class="dialogue-label">SÄ°STEM MESAJI</span>
      <div id="dialogue-text" class="typing-text"></div>
    </div>

    <div id="options-container" class="options-grid"></div>

    <div id="result-area" class="result-card">
      <div class="result-header">
        <span id="drink-name"></span>
        <span>%99 MATCH</span>
      </div>
      <div class="result-body">
        <div id="drink-description" class="drink-desc"></div>

        <div class="recipe-box">
          <strong style="color:var(--amber); display:block; margin-bottom:6px;">> REÃ‡ETE:</strong>
          <div id="drink-recipe"></div>
        </div>

        <a id="price-link" href="#" target="_blank" class="price-btn">
          [ ğŸŒ GÃœNCEL FÄ°YAT ARAÅTIRMASI YAP ]
        </a>

        <button id="restart-btn" class="restart-btn" type="button">
          [ < YENÄ°DEN BAÅLAT ]
        </button>
      </div>
    </div>
  </div>

  <script>
    // =========================================================
    // (4)(5) UYGULAMA NOTU:
    // - Barmen IDLE/LISTEN'de SABÄ°T: gerÃ§ekÃ§i, gÃ¼ven veren.
    // - MIX anÄ±nda HAFÄ°F animasyon: â€œyaptÄ± olduâ€ hissi.
    // - YeÅŸil sadece READY: renk disiplini.
    // =========================================================

    const bartenderFrames = [
`   .---.   
  /     \\  
  | O O |  
   \\ - /   
  /  _  \\  
 |  | |  | 
 (  |_|  ) `,

`   .---.   
  /     \\  
  | > < |  
   \\ o /   
  / / \\ \\  
 |  \\_/  | 
 ( SHAKE ) `,

`   .---.   
  /     \\  
  | - O |  
   \\ ~ /   
  /  _  \\  
 /  / \\  \\ 
(   |_|   )`
    ];

    const glassArts = {
      rocks: 
`   _________
  |         |
  |  ICE    |
  |   O     |
  |_________|
 [ ROCKS GL ]`,

      martini:
`   \\     /
    \\ o /
     \\ /
      |
      |
     _|_
 [ MARTINI ]`,

      highball:
`  |       |
  |   |   |
  |   |   |
  |   O   |
  |_______|
 [ HIGHBALL]`,

      shot:
`   _     _
   \\___/
   |   |
   |___|
  [ SHOT ]`,

      wine:
`    \\   /
     \\ /
      |
      |
     _|_
  [ WINE ]`,

      raki:
`   |     |
   |     |
   |_____|
   |     |
   |_____|
   [ RAKI ]`,
   
      mule:
`   |~~~~~|
  _|     |
 [_      |
   |_____|
  [ MUG  ]`,

      tiki:
`   /     \\
  |  O O  |
  |   ^   |
   \\  -  /
    -----
   [ TIKI ]`
    };

    // --- DOM refs
    const visualEl = document.getElementById('visual-content');
    const statusEl = document.getElementById('status-badge');
    const dialogueBox = document.getElementById('dialogue-text');
    const optionsBox = document.getElementById('options-container');
    const resultArea = document.getElementById('result-area');
    const restartBtn = document.getElementById('restart-btn');

    // --- "Sahne" mantÄ±ÄŸÄ±: gerÃ§ekÃ§ilik iÃ§in animasyonu sadece gerektiÄŸinde oynat
    const Scene = { IDLE:"IDLE", LISTEN:"LISTEN", SCAN:"SCAN", MIX:"MIX", SERVE:"SERVE" };
    let scene = Scene.IDLE;

    // (5) HÄ±z dÃ¼zeltmesi: 6fps deÄŸil, 2fps. MIX'te bile kontrollÃ¼.
    const fpsByScene = {
      [Scene.IDLE]: 0,    // sabit kare
      [Scene.LISTEN]: 0,  // sabit kare
      [Scene.SCAN]: 1.5,  // Ã§ok hafif â€œÃ§alÄ±ÅŸÄ±yorâ€ hissi
      [Scene.MIX]: 2.2,   // hafif hareket, komedi deÄŸil
      [Scene.SERVE]: 0
    };

    let frameIndex = 0;
    let lastTime = performance.now();
    let acc = 0;

    function setStatus(text){
      statusEl.innerText = `[ ${text} ]`;
    }

    function setScene(next){
      scene = next;

      // renk disiplini: amber default, yeÅŸil sadece READY
      statusEl.style.color = "var(--amber)";
      statusEl.style.borderColor = "var(--amber)";
      visualEl.style.color = "var(--amber)";

      if (scene === Scene.IDLE)   setStatus("BEKLÄ°YOR");
      if (scene === Scene.LISTEN) setStatus("DÄ°NLÄ°YOR...");
      if (scene === Scene.SCAN)   setStatus("HAZIRLIYOR...");
      if (scene === Scene.MIX)    setStatus("KARIÅTIRIYOR...");
      if (scene === Scene.SERVE){
        setStatus("HAZIR");
        statusEl.style.color = "var(--ready)";
        statusEl.style.borderColor = "var(--ready)";
      }
    }

    function renderBartender(){
      // IDLE/LISTEN: tek kare (komikliÄŸi Ã¶ldÃ¼rÃ¼r, gerÃ§ekÃ§i durur)
      if (scene === Scene.IDLE || scene === Scene.LISTEN){
        visualEl.innerText = bartenderFrames[0];
        return;
      }

      // SCAN: iki kare arasÄ±nda Ã§ok yumuÅŸak geÃ§iÅŸ (hala ciddi)
      if (scene === Scene.SCAN){
        const seq = [0, 2]; // â€œÃ§alÄ±ÅŸÄ±yorâ€ ama sakince
        visualEl.innerText = bartenderFrames[seq[frameIndex % seq.length]];
        frameIndex++;
        return;
      }

      // MIX: Ã¼Ã§ kare ama dÃ¼ÅŸÃ¼k fps (shake anÄ± kÄ±sa ve kontrollÃ¼)
      if (scene === Scene.MIX){
        const seq = [0, 1, 2, 1]; // kÃ¼Ã§Ã¼k loop: â€œkarÄ±ÅŸtÄ±rdÄ±â€
        visualEl.innerText = bartenderFrames[seq[frameIndex % seq.length]];
        frameIndex++;
        return;
      }
    }

    function loop(now){
      const dt = Math.min(0.05, (now - lastTime) / 1000);
      lastTime = now;

      const fps = fpsByScene[scene] || 0;

      if (fps <= 0){
        // sabit sahnelerde her frame render gerekmez ama gÃ¼venli olsun:
        renderBartender();
        requestAnimationFrame(loop);
        return;
      }

      acc += dt;
      const step = 1 / fps;

      while (acc >= step){
        acc -= step;
        renderBartender();
      }
      requestAnimationFrame(loop);
    }

    requestAnimationFrame(loop);

    function showDrinkArt(glassType){
      // SERVE: bartender durur, bardak gelir
      setScene(Scene.SERVE);

      visualEl.style.opacity = 0;
      setTimeout(() => {
        const art = glassArts[glassType] || glassArts.rocks;
        visualEl.innerText = art;
        visualEl.style.opacity = 1;

        // Bardakta da amber kalsÄ±n; yeÅŸil sadece status'te.
        visualEl.style.color = "var(--amber)";
      }, 220);
    }

    // --- typewriter aynÄ±, sadece cursor daha sakin
    function typeWriter(text, i, callback) {
      if (i < text.length) {
        dialogueBox.innerHTML = text.substring(0, i+1) + '<span style="color:var(--amber)">_</span>';
        setTimeout(() => typeWriter(text, i + 1, callback), 18);
      } else {
        dialogueBox.innerHTML = text;
        if (callback) callback();
      }
    }

    // =========================================================
    // Ä°Ã§erik BLOKLARI (questions + drinksDB): DOKUNMADIM
    // =========================================================

    const drinksDB = [
      { name: "OLD FASHIONED", glass: "rocks", tags: { mood: "deep", taste: "bitter", intensity: "high" }, desc: "Viskinin en saf hali. DÃ¼ÅŸÃ¼nmek ve yavaÅŸ yudumlamak iÃ§in.", recipe: "â€¢ 6cl Burbon<br>â€¢ 1 KÃ¼p Åeker<br>â€¢ Angostura Bitters", query: "viski fiyatlarÄ±" },
      { name: "WHISKEY SOUR", glass: "rocks", tags: { mood: "relax", taste: "sour", intensity: "medium" }, desc: "EkÅŸi, tatlÄ± ve sert. Ä°peksi bir doku.", recipe: "â€¢ 6cl Viski<br>â€¢ 3cl Limon Suyu<br>â€¢ Åeker Åurubu", query: "viski fiyatlarÄ±" },
      { name: "GODFATHER", glass: "rocks", tags: { mood: "deep", taste: "sweet", intensity: "high" }, desc: "Viski ve badem likÃ¶rÃ¼.", recipe: "â€¢ 5cl Viski<br>â€¢ 2.5cl Amaretto", query: "viski amaretto fiyat" },
      { name: "RUSTY NAIL", glass: "rocks", tags: { mood: "deep", taste: "bitter", intensity: "high" }, desc: "Ä°skoÃ§ viskisi ve bal likÃ¶rÃ¼.", recipe: "â€¢ 4.5cl Scotch<br>â€¢ 2.5cl Drambuie", query: "scotch viski drambuie fiyat" },
      { name: "MANHATTAN", glass: "martini", tags: { mood: "classy", taste: "bitter", intensity: "high" }, desc: "New York klasiÄŸi.", recipe: "â€¢ 5cl Ã‡avdar Viski<br>â€¢ 2cl KÄ±rmÄ±zÄ± Vermut<br>â€¢ Bitters", query: "viski vermut fiyat" },
      { name: "MINT JULEP", glass: "mule", tags: { mood: "relax", taste: "herbal", intensity: "medium" }, desc: "GÃ¼neyli ferahlÄ±ÄŸÄ±.", recipe: "â€¢ 6cl Burbon<br>â€¢ Bol Taze Nane<br>â€¢ Åeker", query: "burbon viski fiyat" },

      { name: "NEGRONI", glass: "rocks", tags: { mood: "classy", taste: "bitter", intensity: "high" }, desc: "Ä°talyan asaleti.", recipe: "â€¢ 3cl Cin<br>â€¢ 3cl Campari<br>â€¢ 3cl KÄ±rmÄ±zÄ± Vermut", query: "cin campari vermut" },
      { name: "DRY MARTINI", glass: "martini", tags: { mood: "classy", taste: "sour", intensity: "high" }, desc: "Sek ve keskin.", recipe: "â€¢ 6cl Cin<br>â€¢ 1cl Kuru Vermut<br>â€¢ Zeytin", query: "cin vermut fiyat" },
      { name: "GIN TONIC", glass: "highball", tags: { mood: "relax", taste: "sour", intensity: "medium" }, desc: "Basit ve mÃ¼kemmel.", recipe: "â€¢ 5cl Cin<br>â€¢ 15cl Tonik<br>â€¢ Limon", query: "cin fiyatlarÄ±" },
      { name: "TOM COLLINS", glass: "highball", tags: { mood: "energy", taste: "sour", intensity: "medium" }, desc: "YetiÅŸkin limonatasÄ±.", recipe: "â€¢ 5cl Cin<br>â€¢ 3cl Limon<br>â€¢ Åeker & Soda", query: "cin fiyatlarÄ±" },
      { name: "GIMLET", glass: "martini", tags: { mood: "classy", taste: "sour", intensity: "high" }, desc: "Keskin limon tadÄ±.", recipe: "â€¢ 6cl Cin<br>â€¢ 4cl Misket Limonu Suyu", query: "cin fiyatlarÄ±" },

      { name: "ESPRESSO MARTINI", glass: "martini", tags: { mood: "energy", taste: "sweet", intensity: "high" }, desc: "UyandÄ±rÄ±r ve Ã§arpar.", recipe: "â€¢ 5cl Votka<br>â€¢ 3cl Kahve LikÃ¶rÃ¼<br>â€¢ 1 shot Espresso", query: "votka kahlua fiyat" },
      { name: "MOSCOW MULE", glass: "mule", tags: { mood: "relax", taste: "spicy", intensity: "medium" }, desc: "Zencefil ferahlÄ±ÄŸÄ±.", recipe: "â€¢ 5cl Votka<br>â€¢ Zencefil Gazozu<br>â€¢ Limon", query: "votka ginger beer" },
      { name: "COSMOPOLITAN", glass: "martini", tags: { mood: "classy", taste: "fruity", intensity: "medium" }, desc: "Åehirli ve pembe.", recipe: "â€¢ 4cl Votka<br>â€¢ 2cl Portakal LikÃ¶rÃ¼<br>â€¢ KÄ±zÄ±lcÄ±k suyu", query: "votka cointreau fiyat" },
      { name: "WHITE RUSSIAN", glass: "rocks", tags: { mood: "relax", taste: "creamy", intensity: "low" }, desc: "Kremsi bir rÃ¼ya.", recipe: "â€¢ 5cl Votka<br>â€¢ 2cl Kahve LikÃ¶rÃ¼<br>â€¢ 3cl Krema", query: "votka kahlua fiyat" },
      { name: "BLOODY MARY", glass: "highball", tags: { mood: "adventure", taste: "spicy", intensity: "medium" }, desc: "Domates ve acÄ± sos.", recipe: "â€¢ 5cl Votka<br>â€¢ Domates Suyu<br>â€¢ Tabasco & Tuz & Biber", query: "votka fiyatlarÄ±" },
      { name: "CAIPIROSKA", glass: "rocks", tags: { mood: "energy", taste: "sour", intensity: "high" }, desc: "Brezilya esintisi.", recipe: "â€¢ 5cl Votka<br>â€¢ Misket Limonu<br>â€¢ Esmer Åeker", query: "votka fiyatlarÄ±" },

      { name: "MOJITO", glass: "highball", tags: { mood: "energy", taste: "sour", intensity: "medium" }, desc: "Nane ferahlÄ±ÄŸÄ±.", recipe: "â€¢ 5cl Rom<br>â€¢ Nane<br>â€¢ Åeker & Soda", query: "beyaz rom fiyat" },
      { name: "CUBA LIBRE", glass: "highball", tags: { mood: "relax", taste: "sweet", intensity: "medium" }, desc: "Rom ve kola.", recipe: "â€¢ 5cl Rom<br>â€¢ Kola<br>â€¢ Limon", query: "rom fiyatlarÄ±" },
      { name: "DAIQUIRI", glass: "martini", tags: { mood: "classy", taste: "sour", intensity: "high" }, desc: "Sade ve gÃ¼Ã§lÃ¼.", recipe: "â€¢ 6cl Rom<br>â€¢ 3cl Limon<br>â€¢ 2cl Åeker", query: "beyaz rom fiyat" },
      { name: "PINA COLADA", glass: "tiki", tags: { mood: "relax", taste: "creamy", intensity: "low" }, desc: "Tropikal tatil.", recipe: "â€¢ 5cl Rom<br>â€¢ Hindistan Cevizi KremasÄ±<br>â€¢ Ananas Suyu", query: "rom malibu fiyat" },
      { name: "MAI TAI", glass: "tiki", tags: { mood: "adventure", taste: "fruity", intensity: "high" }, desc: "Tiki kÃ¼ltÃ¼rÃ¼nÃ¼n kralÄ±.", recipe: "â€¢ 4cl Rom<br>â€¢ 2cl Portakal LikÃ¶rÃ¼<br>â€¢ Badem Åurubu", query: "rom fiyatlarÄ±" },
      { name: "ZOMBIE", glass: "tiki", tags: { mood: "adventure", taste: "fruity", intensity: "high" }, desc: "Ã‡ok sert ve tehlikeli.", recipe: "â€¢ 3 Ã§eÅŸit Rom<br>â€¢ KayÄ±sÄ± LikÃ¶rÃ¼<br>â€¢ Meyve SularÄ±", query: "rom Ã§eÅŸitleri fiyat" },

      { name: "MARGARITA", glass: "martini", tags: { mood: "energy", taste: "sour", intensity: "high" }, desc: "Meksika ateÅŸi.", recipe: "â€¢ 5cl Tekila<br>â€¢ Portakal LikÃ¶rÃ¼<br>â€¢ Limon & Tuz", query: "tekila fiyatlarÄ±" },
      { name: "TEQUILA SUNRISE", glass: "highball", tags: { mood: "relax", taste: "sweet", intensity: "medium" }, desc: "GÃ¼n doÄŸumu renkleri.", recipe: "â€¢ 5cl Tekila<br>â€¢ Portakal Suyu<br>â€¢ Nar Åurubu", query: "tekila fiyatlarÄ±" },
      { name: "PALOMA", glass: "highball", tags: { mood: "relax", taste: "sour", intensity: "medium" }, desc: "Greyfurt ferahlÄ±ÄŸÄ±.", recipe: "â€¢ 5cl Tekila<br>â€¢ Greyfurt Gazozu<br>â€¢ Limon", query: "tekila fiyatlarÄ±" },
      { name: "TEQUILA SHOT", glass: "shot", tags: { mood: "rebel", taste: "sour", intensity: "high" }, desc: "HÄ±zlÄ± Ã§Ã¶zÃ¼m.", recipe: "â€¢ 4cl Tekila<br>â€¢ Tuz<br>â€¢ Limon Dilimi", query: "tekila fiyatlarÄ±" },

      { name: "RAKI (DUBLE)", glass: "raki", tags: { mood: "deep", taste: "herbal", intensity: "high" }, desc: "Aslan sÃ¼tÃ¼.", recipe: "â€¢ Duble RakÄ±<br>â€¢ SoÄŸuk Su<br>â€¢ Peynir & Kavun", query: "rakÄ± fiyatlarÄ±" },
      { name: "RAKI KOKTEYLÄ°", glass: "highball", tags: { mood: "classy", taste: "fruity", intensity: "medium" }, desc: "Modern dokunuÅŸ.", recipe: "â€¢ 5cl RakÄ±<br>â€¢ Nar Suyu<br>â€¢ Nane", query: "rakÄ± fiyatlarÄ±" },
      { name: "JAGER BOMB", glass: "shot", tags: { mood: "rebel", taste: "herbal", intensity: "high" }, desc: "Enerji patlamasÄ±.", recipe: "â€¢ 4cl JÃ¤germeister<br>â€¢ YarÄ±m kutu Enerji Ä°Ã§eceÄŸi", query: "jagermeister fiyat" },
      { name: "ABSINTHE", glass: "wine", tags: { mood: "adventure", taste: "herbal", intensity: "high" }, desc: "YeÅŸil peri.", recipe: "â€¢ 4cl Absinthe<br>â€¢ SoÄŸuk su ile eritilmiÅŸ ÅŸeker", query: "absinthe fiyat" },

      { name: "APEROL SPRITZ", glass: "wine", tags: { mood: "relax", taste: "fruity", intensity: "low" }, desc: "Ä°talyan aperitifi.", recipe: "â€¢ Prosecco<br>â€¢ Aperol<br>â€¢ Soda", query: "aperol fiyatlarÄ±" },
      { name: "MIMOSA", glass: "wine", tags: { mood: "energy", taste: "fruity", intensity: "low" }, desc: "Brunch klasiÄŸi.", recipe: "â€¢ Åampanya<br>â€¢ Portakal Suyu", query: "ÅŸampanya fiyatlarÄ±" },
      { name: "BELLINI", glass: "wine", tags: { mood: "classy", taste: "sweet", intensity: "low" }, desc: "Åeftali rÃ¼yasÄ±.", recipe: "â€¢ Prosecco<br>â€¢ Åeftali PÃ¼resi", query: "prosecco fiyatlarÄ±" },

      { name: "LONG ISLAND", glass: "highball", tags: { mood: "rebel", taste: "sour", intensity: "high" }, desc: "5 Ã§eÅŸit alkol.", recipe: "â€¢ Votka, Cin, Rom, Tekila, LikÃ¶r<br>â€¢ Kola", query: "votka cin rom fiyat" },
      { name: "SAZERAC", glass: "rocks", tags: { mood: "deep", taste: "herbal", intensity: "high" }, desc: "Absinthe ile yÄ±kanmÄ±ÅŸ.", recipe: "â€¢ Ã‡avdar Viski<br>â€¢ Peychaud's<br>â€¢ Absinthe", query: "viski absinthe fiyat" },
      { name: "BOULEVARDIER", glass: "rocks", tags: { mood: "classy", taste: "bitter", intensity: "high" }, desc: "Viskili Negroni.", recipe: "â€¢ Viski<br>â€¢ Campari<br>â€¢ Vermut", query: "viski campari fiyat" }
    ];

    const questions = [
      {
        text: "HoÅŸ geldin. Ruh halin nasÄ±l?",
        options: [
          { label: "Sakinlik / Reset", value: "relax" },
          { label: "Enerjik / Parti", value: "energy" },
          { label: "Dertli / Derin", value: "deep" },
          { label: "Sofistike / ÅÄ±k", value: "classy" },
          { label: "MaceracÄ± / Egzotik", value: "adventure" },
          { label: "Asi / Kural TanÄ±maz", value: "rebel" }
        ],
        key: "mood"
      },
      {
        text: "DamaÄŸÄ±nda ne arÄ±yorsun?",
        options: [
          { label: "EkÅŸi ve Ferah", value: "sour" },
          { label: "AcÄ± / Karakterli", value: "bitter" },
          { label: "TatlÄ± / YumuÅŸak", value: "sweet" },
          { label: "Meyvemsi", value: "fruity" },
          { label: "KremamsÄ± / TatlÄ±", value: "creamy" },
          { label: "BaharatlÄ± / Otlu", value: "herbal" },
          { label: "YakÄ±cÄ± / Zencefil", value: "spicy" }
        ],
        key: "taste"
      },
      {
        text: "Son olarak, sertlik derecesi?",
        options: [
          { label: "Hafif (Keyiflik)", value: "low" },
          { label: "Orta (Standart)", value: "medium" },
          { label: "Sert (Ã‡arpsÄ±n)", value: "high" }
        ],
        key: "intensity"
      }
    ];

    // --- Ä°ÅŸleyiÅŸ
    let currentStep = 0;
    let userPrefs = {};

    function renderStep(){
      optionsBox.innerHTML = "";

      if (currentStep < questions.length){
        const q = questions[currentStep];
        setScene(Scene.LISTEN);

        typeWriter(q.text, 0, () => {
          q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "option-btn";
            btn.innerText = `> ${opt.label}`;
            btn.onclick = () => handleSelection(q.key, opt.value);
            optionsBox.appendChild(btn);
          });
        });
      } else {
        calculateAndShowResult();
      }
    }

    function handleSelection(key, value){
      userPrefs[key] = value;
      currentStep++;
      renderStep();
    }

    function calculateAndShowResult(){
      setScene(Scene.SCAN);

      typeWriter("Veriler iÅŸleniyor... En uygun karÄ±ÅŸÄ±m taranÄ±yor...", 0, () => {
        setTimeout(() => {
          optionsBox.style.display = "none";

          // kÄ±sa, kontrollÃ¼ â€œmixâ€ sahnesi
          setScene(Scene.MIX);

          setTimeout(() => {
            let bestDrink = null;
            let maxScore = -1;

            drinksDB.forEach(drink => {
              let score = 0;
              if (drink.tags.mood === userPrefs.mood) score += 5;
              if (drink.tags.taste === userPrefs.taste) score += 4;
              if (drink.tags.intensity === userPrefs.intensity) score += 3;
              score += Math.random() * 2;
              if (score > maxScore){ maxScore = score; bestDrink = drink; }
            });

            if (!bestDrink) bestDrink = drinksDB[0];
            showResult(bestDrink);
          }, 650); // MIX sÃ¼resi: â€œyaptÄ±â€ hissi var, ÅŸakaya dÃ¶nmÃ¼yor
        }, 900);
      });
    }

    function showResult(drink){
      showDrinkArt(drink.glass);

      resultArea.style.display = "block";

      document.getElementById('drink-name').innerText = drink.name;
      document.getElementById('drink-description').innerText = drink.desc;
      document.getElementById('drink-recipe').innerHTML = drink.recipe;

      const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(drink.query + " 2026")}`;
      document.getElementById('price-link').href = searchUrl;

      dialogueBox.innerHTML = `<span style="color:var(--amber)">SERVÄ°S EDÄ°LDÄ°:</span><br>Senin iÃ§in en iyi seÃ§im: <span style="color:var(--amber)">${drink.name}</span>`;
    }

    // Start
    window.addEventListener('DOMContentLoaded', () => {
      setScene(Scene.IDLE);
      visualEl.innerText = bartenderFrames[0];
      renderStep();
    });

    restartBtn.addEventListener('click', () => location.reload());
  </script>
</body>
</html>
