<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Bartender | Convivium_</title>
    <style>
        /* --- GENEL ATMOSFER --- */
        body {
            background-color: #050505;
            background-image: 
                linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            color: #e0e0e0;
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        /* Navigasyon */
        nav { position: absolute; top: 20px; left: 20px; z-index: 10; }
        nav a {
            color: #ff9900;
            text-decoration: none;
            font-weight: bold;
            border: 1px solid #ff9900;
            padding: 8px 15px;
            transition: all 0.3s;
            background: rgba(0,0,0,0.5);
        }
        nav a:hover { background: #ff9900; color: #000; box-shadow: 0 0 15px #ff9900; }

        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
            z-index: 2;
            padding-bottom: 50px;
        }

        /* --- BARMEN ANÄ°MASYONU --- */
        .bartender-wrapper {
            margin-bottom: 20px;
            height: 140px; /* ZÄ±plamayÄ± Ã¶nlemek iÃ§in sabit yÃ¼kseklik */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bartender-face {
            font-family: 'Courier New', Courier, monospace; /* Sabit geniÅŸlikli font ÅŸart */
            font-size: 14px; /* Mobilde taÅŸmamasÄ± iÃ§in ayarlandÄ± */
            line-height: 1.2;
            color: #ff9900;
            white-space: pre; /* ASCII'nin bozulmamasÄ± iÃ§in kritik */
            text-shadow: 0 0 5px #ff9900;
            font-weight: bold;
        }

        /* --- UI ELEMENTLERÄ° --- */
        .dialogue-box {
            border: 2px solid #333;
            background: rgba(0,0,0,0.85);
            padding: 20px;
            min-height: 80px;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            border-radius: 4px;
            text-align: left;
        }

        .typing-text {
            font-size: 1.1rem;
            line-height: 1.5;
            color: #fff;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            animation: fadeIn 0.5s ease;
        }

        .option-btn {
            background: transparent;
            border: 1px solid #555;
            color: #aaa;
            padding: 15px;
            cursor: pointer;
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .option-btn:hover {
            border-color: #ff9900;
            color: #ff9900;
            background: rgba(255, 153, 0, 0.1);
            transform: scale(1.02);
            box-shadow: 0 0 10px rgba(255, 153, 0, 0.2);
        }

        /* --- SONUÃ‡ KARTI --- */
        .result-card {
            display: none;
            text-align: left;
            border: 1px solid #ff9900;
            background: #111;
            padding: 0;
            animation: slideUp 0.6s ease;
            margin-bottom: 20px;
        }

        .result-header {
            background: #ff9900;
            color: #000;
            padding: 10px 20px;
            font-weight: bold;
            font-size: 1.2rem;
            text-transform: uppercase;
            display: flex;
            justify-content: space-between;
        }

        .result-body { padding: 20px; }
        
        .drink-desc { margin-bottom: 20px; color: #ccc; font-style: italic; border-bottom: 1px solid #333; padding-bottom: 15px;}
        
        .recipe-box {
            border-left: 3px solid #ff9900;
            padding-left: 15px;
            margin: 20px 0;
            color: #ddd;
            background: rgba(255, 153, 0, 0.05);
            padding: 10px;
        }
        
        .recipe-title { color: #ff9900; font-weight: bold; display: block; margin-bottom: 5px; }

        .price-btn {
            display: block;
            width: 100%;
            text-align: center;
            background: #222;
            color: #fff;
            padding: 15px;
            text-decoration: none;
            border: 1px dashed #666;
            margin-top: 20px;
            transition: all 0.3s;
            font-weight: bold;
            box-sizing: border-box; /* Padding taÅŸmasÄ±nÄ± Ã¶nler */
        }
        
        .price-btn:hover {
            border-color: #0f0;
            color: #0f0;
            background: #001100;
            box-shadow: 0 0 10px #0f0;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        @media (max-width: 500px) {
            .options-grid { grid-template-columns: 1fr; }
            .bartender-face { font-size: 11px; } /* Ã‡ok kÃ¼Ã§Ã¼k ekranlarda daha da kÃ¼Ã§Ã¼lt */
        }
    </style>
</head>
<body>

    <nav>
        <a href="index.html">< ANA SAYFA</a>
    </nav>

    <div class="container">
        <div class="bartender-wrapper">
            <pre id="ascii-bartender" class="bartender-face"></pre>
        </div>

        <div class="dialogue-box">
            <div id="dialogue-text" class="typing-text"></div>
        </div>

        <div id="options-container" class="options-grid">
            </div>

        <div id="result-area" class="result-card">
            <div class="result-header">
                <span id="drink-name">Ä°Ã‡KÄ° ADI</span>
                <span>[MATCH: %98]</span>
            </div>
            <div class="result-body">
                <div id="drink-description" class="drink-desc">AÃ§Ä±klama...</div>
                
                <div class="recipe-box">
                    <span class="recipe-title">> REÃ‡ETE (KOKTEYL):</span>
                    <div id="drink-recipe">Malzemeler...</div>
                </div>

                <a id="price-link" href="#" target="_blank" class="price-btn">
                    [ ðŸ“Š GÃœNCEL RAF FÄ°YATLARINI GÃ–R ]
                </a>
                
                <button onclick="location.reload()" style="margin-top:15px; background:none; border:none; color:#555; cursor:pointer; width:100%; padding:10px;">
                    [ < TEKRAR SEÃ‡Ä°M YAP ]
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- 1. BARMEN ANÄ°MASYONU (ASCII ANIMATION) ---
        const bartenderFrames = [
            // Frame 0: Bekleme (GÃ¶zler aÃ§Ä±k)
`   .---.
  /     \\   [ BEKLÄ°YOR ]
  | O O |   
   \\ - /    
  /  _  \\
 |  | |  |
 (  |_|  )
`,
            // Frame 1: KonuÅŸma/Hareket (GÃ¶zler kÄ±sÄ±k, shaker sallÄ±yor)
`   .---.
  /     \\   [ DÄ°NLÄ°YOR ]
  | - - |   
   \\ o /    
  / / \\ \\
 |  \\_/  |
 ( SHAKE )
`,
            // Frame 2: Ä°ÅŸlem YapÄ±yor (Tek gÃ¶z kÄ±rpÄ±yor)
`   .---.
  /     \\   [ HAZIRLIYOR ]
  | O - |   
   \\ ~ /    
  /  _  \\
 /  / \\  \\
(   |_|   )
`
        ];

        let frameIndex = 0;
        const bartenderEl = document.getElementById('ascii-bartender');

        // Barmen animasyon dÃ¶ngÃ¼sÃ¼
        setInterval(() => {
            // EÄŸer sonuÃ§ ekranÄ± aÃ§Ä±ksa barmen daha hÄ±zlÄ± hareket etsin (kutlama gibi)
            // Normalde daha sakin dursun
            bartenderEl.innerText = bartenderFrames[frameIndex];
            frameIndex = (frameIndex + 1) % bartenderFrames.length;
        }, 800); // 800ms'de bir kare deÄŸiÅŸtir

        // --- 2. Ä°Ã‡KÄ° VERÄ°TABANI ---
        const drinksDB = [
            {
                name: "OLD FASHIONED",
                tags: { mood: "deep", taste: "bitter", intensity: "high" },
                desc: "Klasiklerin atasÄ±. Viskinin en saf ve karizmatik hali. DÃ¼ÅŸÃ¼nmek ve yavaÅŸ yudumlamak iÃ§in.",
                recipe: "â€¢ 6cl Burbon veya Ã‡avdar Viski<br>â€¢ 1 KÃ¼p Åžeker<br>â€¢ 2 damla Angostura Bitters<br>â€¢ Portakal kabuÄŸu",
                query: "viski fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "NEGRONI",
                tags: { mood: "classy", taste: "bitter", intensity: "high" },
                desc: "Ä°talyan asaleti. TatlÄ± ve acÄ±nÄ±n mÃ¼kemmel dengesi. Bir aperitiften fazlasÄ±.",
                recipe: "â€¢ 3cl Cin<br>â€¢ 3cl Campari<br>â€¢ 3cl Vermut (KÄ±rmÄ±zÄ±)<br>â€¢ Portakal dilimi ile servis et",
                query: "cin fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "MOJITO",
                tags: { mood: "energy", taste: "sour", intensity: "medium" },
                desc: "KÃ¼ba'nÄ±n ferahlatÄ±cÄ± rÃ¼zgarÄ±. Nane ve limonun dansÄ±.",
                recipe: "â€¢ 5cl Beyaz Rom<br>â€¢ YarÄ±m misket limonu<br>â€¢ 10 yaprak taze nane<br>â€¢ 2 kaÅŸÄ±k ÅŸeker & Soda",
                query: "beyaz rom fiyatlarÄ±"
            },
            {
                name: "WHISKEY SOUR",
                tags: { mood: "relax", taste: "sour", intensity: "medium" },
                desc: "EkÅŸi, tatlÄ± ve sert. Ä°peksi bir doku iÃ§in yumurta akÄ± ile Ã§alkalanÄ±r.",
                recipe: "â€¢ 6cl Viski<br>â€¢ 3cl Limon Suyu<br>â€¢ 2cl Åžeker Åžurubu<br>â€¢ (Opsiyonel) Yumurta akÄ±",
                query: "viski fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "ESPRESSO MARTINI",
                tags: { mood: "energy", taste: "sweet", intensity: "high" },
                desc: "Hem uyandÄ±rÄ±r hem Ã§arpar. Geceyi baÅŸlatmak iÃ§in mÃ¼kemmel.",
                recipe: "â€¢ 5cl Votka<br>â€¢ 3cl Kahve LikÃ¶rÃ¼ (Kahlua)<br>â€¢ 1 shot taze Espresso<br>â€¢ Buzla Ã§ok sert Ã§alkala",
                query: "votka fiyatlarÄ± kahlua"
            },
            {
                name: "APEROL SPRITZ",
                tags: { mood: "relax", taste: "fruity", intensity: "low" },
                desc: "GÃ¼n batÄ±mÄ±nÄ±n resmi iÃ§eceÄŸi. Hafif, kÃ¶pÃ¼klÃ¼ ve turuncu.",
                recipe: "â€¢ 3 Ã¶lÃ§Ã¼ Prosecco (KÃ¶pÃ¼klÃ¼ Åžarap)<br>â€¢ 2 Ã¶lÃ§Ã¼ Aperol<br>â€¢ 1 Ã¶lÃ§Ã¼ Soda<br>â€¢ Bol buz",
                query: "aperol fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "LONG ISLAND ICED TEA",
                tags: { mood: "energy", taste: "sour", intensity: "high" },
                desc: "Masum adÄ±na aldanma, iÃ§inde 5 Ã§eÅŸit alkol var.",
                recipe: "â€¢ 2cl Votka, 2cl Cin, 2cl Rom<br>â€¢ 2cl Tekila, 2cl Portakal LikÃ¶rÃ¼<br>â€¢ Limon suyu & Kola",
                query: "votka cin rom fiyatlarÄ±"
            },
            {
                name: "MOSCOW MULE",
                tags: { mood: "relax", taste: "sour", intensity: "medium" },
                desc: "Zencefilin yakÄ±cÄ± ferahlÄ±ÄŸÄ±. BakÄ±r kupada buz gibi bir klasik.",
                recipe: "â€¢ 5cl Votka<br>â€¢ 15cl Zencefil Gazozu (Ginger Beer)<br>â€¢ Misket limonu suyu",
                query: "votka fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "COSMOPOLITAN",
                tags: { mood: "classy", taste: "fruity", intensity: "medium" },
                desc: "Åžehirli, ÅŸÄ±k ve pembe. Modern bir klasik.",
                recipe: "â€¢ 4cl Votka (Limonlu)<br>â€¢ 2cl Portakal LikÃ¶rÃ¼<br>â€¢ 1cl Limon suyu<br>â€¢ 3cl KÄ±zÄ±lcÄ±k suyu",
                query: "votka fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "RAKI (ASLAN SÃœTÃœ)",
                tags: { mood: "deep", taste: "bitter", intensity: "high" },
                desc: "Bu topraklarda dertler en iyi bÃ¶yle Ã§Ã¶zÃ¼lÃ¼r. YavaÅŸ iÃ§, mezesiz iÃ§me.",
                recipe: "â€¢ Duble RakÄ±<br>â€¢ SoÄŸuk Su<br>â€¢ Bir dilim kavun ve beyaz peynir",
                query: "rakÄ± fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "GÄ°N TONÄ°C",
                tags: { mood: "classy", taste: "sour", intensity: "medium" },
                desc: "BasitliÄŸin mÃ¼kemmelliÄŸi. Kaliteli bir cin ve taze tonik.",
                recipe: "â€¢ 5cl Cin<br>â€¢ 15cl Tonik<br>â€¢ SalatalÄ±k ÅŸeridi veya Limon",
                query: "cin fiyatlarÄ± gÃ¼ncel"
            },
            {
                name: "MARGARITA",
                tags: { mood: "energy", taste: "sour", intensity: "high" },
                desc: "Meksika ateÅŸi. Tuzlu kenarlar ve tekilanÄ±n gÃ¼cÃ¼.",
                recipe: "â€¢ 5cl Tekila<br>â€¢ 3cl Portakal LikÃ¶rÃ¼<br>â€¢ 2cl Limon suyu<br>â€¢ BardaÄŸÄ±n kenarÄ±nÄ± tuzla",
                query: "tekila fiyatlarÄ± gÃ¼ncel"
            }
        ];

        // --- 3. SORULAR ---
        const questions = [
            {
                text: "HoÅŸ geldin. BugÃ¼n ruh halin nasÄ±l?",
                options: [
                    { label: "Yorgunum, Sakinlik istiyorum", value: "relax" },
                    { label: "Enerjik, Parti modu!", value: "energy" },
                    { label: "Dertli / DÃ¼ÅŸÃ¼nceli", value: "deep" },
                    { label: "Sofistike / Kendimi ÅžÄ±martÄ±cam", value: "classy" }
                ],
                key: "mood"
            },
            {
                text: "DamaÄŸÄ±nda nasÄ±l bir tat arÄ±yorsun?",
                options: [
                    { label: "EkÅŸi ve Ferah", value: "sour" },
                    { label: "AcÄ± ve Karakterli", value: "bitter" },
                    { label: "TatlÄ± ve YumuÅŸak", value: "sweet" },
                    { label: "Meyvemsi ve Aromatik", value: "fruity" }
                ],
                key: "taste"
            },
            {
                text: "Son olarak, etki seviyesi ne olsun?",
                options: [
                    { label: "Hafif (Ã‡arpmayan)", value: "low" },
                    { label: "Orta (Keyiflik)", value: "medium" },
                    { label: "Sert (Beni Ã§arpsÄ±n)", value: "high" }
                ],
                key: "intensity"
            }
        ];

        // --- 4. MANTIK ---
        let currentStep = 0;
        let userPrefs = {};

        const dialogueBox = document.getElementById('dialogue-text');
        const optionsBox = document.getElementById('options-container');
        const resultArea = document.getElementById('result-area');

        function typeWriter(text, i, callback) {
            if (i < text.length) {
                dialogueBox.innerHTML = text.substring(0, i+1) + '<span style="color:#ff9900">_</span>';
                setTimeout(() => typeWriter(text, i + 1, callback), 25); // YazÄ± hÄ±zÄ±
            } else {
                dialogueBox.innerHTML = text; 
                if (callback) callback();
            }
        }

        function renderStep() {
            optionsBox.innerHTML = ""; 
            
            if (currentStep < questions.length) {
                const q = questions[currentStep];
                typeWriter(q.text, 0, () => {
                    q.options.forEach(opt => {
                        const btn = document.createElement('button');
                        btn.className = 'option-btn';
                        btn.innerText = `> ${opt.label}`;
                        btn.onclick = () => handleSelection(q.key, opt.value);
                        optionsBox.appendChild(btn);
                    });
                });
            } else {
                calculateAndShowResult();
            }
        }

        function handleSelection(key, value) {
            userPrefs[key] = value;
            currentStep++;
            renderStep();
        }

        function calculateAndShowResult() {
            typeWriter("Sistem verileri iÅŸliyor... En uygun karÄ±ÅŸÄ±m taranÄ±yor...", 0, () => {
                setTimeout(() => {
                    optionsBox.style.display = 'none'; 
                    
                    let bestDrink = null;
                    let maxScore = -1;

                    drinksDB.forEach(drink => {
                        let score = 0;
                        if (drink.tags.mood === userPrefs.mood) score += 4; // Mood en Ã¶nemli faktÃ¶r
                        if (drink.tags.taste === userPrefs.taste) score += 2;
                        if (drink.tags.intensity === userPrefs.intensity) score += 2;
                        
                        // KÃ¼Ã§Ã¼k bir kaos faktÃ¶rÃ¼
                        score += Math.random() * 1.5;

                        if (score > maxScore) {
                            maxScore = score;
                            bestDrink = drink;
                        }
                    });

                    showResult(bestDrink);
                }, 1200);
            });
        }

        function showResult(drink) {
            resultArea.style.display = 'block';
            
            document.getElementById('drink-name').innerText = drink.name;
            document.getElementById('drink-description').innerText = drink.desc;
            document.getElementById('drink-recipe').innerHTML = drink.recipe;
            
            // YENÄ° Ã‡Ã–ZÃœM: Direkt Google AramasÄ± (Web)
            // "Shop" sekmesi yerine normal Google aramasÄ± yapar.
            // Sorguya "2026 gÃ¼ncel fiyat" ekleyerek blog/haber sitelerini hedefler.
            const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(drink.query + " 2026")}`;
            const btn = document.getElementById('price-link');
            btn.href = searchUrl;
            
            dialogueBox.innerHTML = `<span style="color:#ff9900">BULUNDU:</span><br>Senin iÃ§in en uygun reÃ§ete: ${drink.name}`;
        }

        window.onload = () => {
            // BaÅŸlangÄ±Ã§ animasyonu
            bartenderEl.innerText = bartenderFrames[0];
            renderStep();
        };

    </script>
</body>
</html>
