<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>The Bartender | Glitch Edition</title>

  <style>
    /* =========================
       CORE AESTHETICS
       ========================= */
    :root {
      --bg: #020202;
      --panel: rgba(10, 10, 10, 0.9);
      --text: #c0c0c0;
      --accent: #ff9900; /* Amber */
      --glow: rgba(255, 153, 0, 0.4);
      --ok: #00ff41; /* Matrix Green */
      --scanline: rgba(0, 0, 0, 0.5);
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }

    /* --- CRT SCANLINE ANIMATION --- */
    body::after {
      content: " ";
      display: block;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0),
        rgba(255, 255, 255, 0) 50%,
        rgba(0, 0, 0, 0.2) 50%,
        rgba(0, 0, 0, 0.2)
      );
      background-size: 100% 4px;
      z-index: 999;
      pointer-events: none;
      animation: scanlines 0.3s linear infinite; /* Scanline hareketi */
      opacity: 0.6;
    }

    /* Ekranda hafif bir kavis varmƒ±≈ü gibi vinyet */
    body::before {
      content: " ";
      display: block;
      position: fixed;
      inset: 0;
      background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.8) 100%);
      z-index: 998;
      pointer-events: none;
    }

    nav { position: absolute; top: 20px; left: 20px; z-index: 10; }
    nav a {
      color: var(--accent);
      text-decoration: none;
      font-weight: bold;
      border: 1px solid var(--accent);
      padding: 8px 15px;
      background: #000;
      text-transform: uppercase;
      font-size: 0.8rem;
      letter-spacing: 2px;
      transition: all 0.2s;
    }
    nav a:hover { 
      background: var(--accent); 
      color: #000; 
      box-shadow: 0 0 15px var(--accent); 
    }

    .container {
      width: 90%;
      max-width: 650px;
      text-align: center;
      z-index: 5;
      padding-bottom: 50px;
      position: relative;
    }

    /* =========================
       MONITOR & ASCII STAGE
       ========================= */
    .monitor-frame {
      border: 3px double #444;
      background: #050505;
      padding: 15px;
      margin-bottom: 25px;
      box-shadow: 0 0 30px rgba(255, 153, 0, 0.1);
      position: relative;
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    /* Durum Rozeti (Yanƒ±p S√∂nen) */
    .status-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 0.7rem;
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 3px 8px;
      background: #000;
      letter-spacing: 1px;
      box-shadow: 0 0 5px var(--accent);
    }

    .visual-display {
      font-family: 'Courier New', Courier, monospace;
      font-weight: 700;
      color: var(--accent);
      white-space: pre;
      text-shadow: 0 0 8px var(--glow);
      font-size: 14px;
      line-height: 1.25;
      text-align: center;
      /* Animasyonlarda bulanƒ±klƒ±k olu≈ümamasƒ± i√ßin */
      transform: translateZ(0); 
    }

    /* Glitch Efekti ƒ∞√ßin CSS Sƒ±nƒ±fƒ± */
    .glitching {
      animation: glitch-anim 0.2s infinite;
      color: #fff !important;
      text-shadow: 2px 0 red, -2px 0 blue;
    }

    /* =========================
       UI ELEMENTS
       ========================= */
    .dialogue-box {
      border: 1px solid #333;
      border-left: 4px solid var(--accent);
      background: rgba(10, 10, 10, 0.95);
      padding: 25px 20px;
      min-height: 70px;
      margin-bottom: 25px;
      text-align: left;
      position: relative;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    .dialogue-label {
      position: absolute;
      top: -10px;
      left: 10px;
      background: var(--bg);
      color: #666;
      font-size: 0.65rem;
      padding: 0 8px;
      border: 1px solid #333;
    }

    .typing-text { 
      font-size: 1.05rem; 
      line-height: 1.5; 
      color: #eee; 
    }

    /* Se√ßenekler Izgarasƒ± */
    .options-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      opacity: 0; 
      animation: fadeIn 0.5s forwards;
    }

    .option-btn {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid #444;
      color: #888;
      padding: 15px;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.9rem;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
    }

    /* Hover Efekti: Soldan dolan bar */
    .option-btn::before {
      content: "";
      position: absolute;
      top: 0; left: 0; width: 0; height: 100%;
      background: var(--accent);
      transition: width 0.3s ease;
      z-index: 0;
      opacity: 0.1;
    }

    .option-btn:hover::before { width: 100%; }
    
    .option-btn:hover {
      border-color: var(--accent);
      color: #fff;
      text-shadow: 0 0 8px var(--accent);
      transform: translateY(-2px);
    }

    .option-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* =========================
       RESULT CARD
       ========================= */
    .result-card {
      display: none;
      text-align: left;
      border: 2px solid var(--ok); /* Sonu√ß ye≈üil olsun */
      background: #050a05;
      margin-top: 20px;
      box-shadow: 0 0 40px rgba(0, 255, 65, 0.1);
      animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    .result-header {
      background: var(--ok);
      color: #000;
      padding: 12px 20px;
      font-weight: 900;
      display: flex;
      justify-content: space-between;
      font-size: 1.1rem;
      letter-spacing: 1px;
    }

    .result-body { padding: 25px; }
    
    .drink-desc { 
      margin-bottom: 20px; 
      color: #ccc; 
      font-style: italic; 
      font-size: 1rem; 
      border-bottom: 1px dashed #333;
      padding-bottom: 15px;
    }

    .recipe-box {
      border-left: 3px solid var(--ok);
      padding-left: 15px;
      margin: 20px 0;
      color: #bbb;
      font-size: 0.95rem;
      background: rgba(0, 255, 65, 0.05);
      padding: 15px;
    }

    .price-btn {
      display: block;
      width: 100%;
      text-align: center;
      background: transparent;
      color: var(--ok);
      padding: 15px;
      text-decoration: none;
      border: 1px solid var(--ok);
      margin-top: 25px;
      transition: all 0.3s;
      font-size: 0.9rem;
      font-weight: bold;
      letter-spacing: 1px;
      box-sizing: border-box;
    }

    .price-btn:hover {
      background: var(--ok);
      color: #000;
      box-shadow: 0 0 20px var(--ok);
    }

    .restart-btn {
      width: 100%;
      background: none;
      border: none;
      color: #666;
      margin-top: 15px;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.8rem;
      text-transform: uppercase;
    }
    .restart-btn:hover { color: #fff; text-decoration: underline; }

    /* =========================
       ANIMATIONS
       ========================= */
    @keyframes scanlines {
      from { background-position: 0 0; }
      to { background-position: 0 4px; }
    }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    
    @keyframes slideUp { 
      from { transform: translateY(30px); opacity: 0; } 
      to { transform: translateY(0); opacity: 1; } 
    }

    @keyframes glitch-anim {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(-2px, -2px); }
      60% { transform: translate(2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0); }
    }

    @media (max-width: 600px) {
      .options-grid { grid-template-columns: 1fr; }
      .container { padding-top: 70px; }
      .visual-display { font-size: 11px; } /* Mobilde k√º√ß√ºlt */
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html">[ &lt; Geri ]</a>
  </nav>

  <div id="ascii-storage" style="display:none;">
    <div id="frame-0">
   .---.   
  /     \  
  | O O |  
   \ - /   
  /  _  \  
 |  | |  | 
 (  |_|  ) 
    </div>
    <div id="frame-1">
   .---.   
  /     \  
  | > < |  
   \ o /   
  / / \ \  
 |  \_/  | 
 ( SHAKE ) 
    </div>
    <div id="frame-2">
   .---.   
  /     \  
  | - O |  
   \ ~ /   
  /  _  \  
 /  / \  \ 
(   |_|   )
    </div>
    
    <div id="glass-rocks">
   _________
  |         |
  |  ICE    |
  |   O     |
  |_________|
 [ ROCKS GL ]
    </div>
    <div id="glass-martini">
   \     /
    \ o /
     \ /
      |
      |
     _|_
 [ MARTINI ]
    </div>
    <div id="glass-highball">
  |       |
  |   |   |
  |   |   |
  |   O   |
  |_______|
 [ HIGHBALL]
    </div>
    <div id="glass-shot">
   _     _
   \___/
   |   |
   |___|
  [ SHOT ]
    </div>
    <div id="glass-wine">
    \   /
     \ /
      |
      |
     _|_
  [ WINE ]
    </div>
    <div id="glass-raki">
   |     |
   |     |
   |_____|
   |     |
   |_____|
   [ RAKI ]
    </div>
    <div id="glass-mule">
   |~~~~~|
  _|     |
 [_      |
   |_____|
  [ MUG  ]
    </div>
    <div id="glass-tiki">
   /     \
  |  O O  |
  |   ^   |
   \  -  /
    -----
   [ TIKI ]
    </div>
  </div>

  <div class="container">
    
    <div class="monitor-frame">
      <div id="status-badge" class="status-badge">[ Sƒ∞STEM ONLƒ∞NE ]</div>
      <div id="visual-content" class="visual-display"></div>
    </div>

    <div class="dialogue-box">
      <span class="dialogue-label">LOG #8291</span>
      <div id="dialogue-text" class="typing-text"></div>
    </div>

    <div id="options-container" class="options-grid"></div>

    <div id="result-area" class="result-card">
      <div class="result-header">
        <span id="drink-name"></span>
        <span style="opacity:0.7">MATCH: %99</span>
      </div>
      <div class="result-body">
        <div id="drink-description" class="drink-desc"></div>
        
        <div class="recipe-box">
          <strong style="color:var(--ok); display:block; margin-bottom:8px;">&gt; RE√áETE DOSYASI:</strong>
          <div id="drink-recipe"></div>
        </div>

        <a id="price-link" href="#" target="_blank" class="price-btn">
          [ üîç ƒ∞NTERNETTE Fƒ∞YAT ARA≈ûTIRMASI BA≈ûLAT ]
        </a>
        
        <button onclick="location.reload()" class="restart-btn">
          [ &lt; Sƒ∞STEMƒ∞ YENƒ∞DEN BA≈ûLAT ]
        </button>
      </div>
    </div>
  </div>

  <script>
    /* =========================================
       CORE ENGINE v2.0
       ========================================= */

    // 1. G√úVENLƒ∞ ASCII OKUYUCU
    const getAscii = (id) => document.getElementById(id).innerHTML;

    const bartenderFrames = [
        getAscii('frame-0'),
        getAscii('frame-1'),
        getAscii('frame-2')
    ];

    // 2. DOM ELEMENTLERƒ∞
    let frameIndex = 0;
    let animationInterval;
    const visualEl = document.getElementById('visual-content');
    const statusEl = document.getElementById('status-badge');
    const dialogueBox = document.getElementById('dialogue-text');
    const optionsBox = document.getElementById('options-container');
    const resultArea = document.getElementById('result-area');

    // 3. GLITCH MOTORU (YENƒ∞ √ñZELLƒ∞K)
    // Bu fonksiyon metni rastgele karakterlerle bozar, sonra d√ºzeltir
    function renderWithGlitch(text) {
        // √ñnce biraz "g√ºr√ºlt√º" yap
        const glitchChars = "!<>-_\\/[]{}‚Äî=+*^?#________";
        let noiseText = "";
        
        // Rastgele uzunlukta g√ºr√ºlt√º olu≈ütur (ASCII ≈üeklini korumak zor olduƒüu i√ßin kƒ±sa tutuyoruz)
        // Ancak burada ASCII sanatƒ±nƒ± bozmamak i√ßin sadece belirli aralƒ±klarla renk deƒüi≈üimi ve titre≈üim yapƒ±yoruz
        
        visualEl.innerHTML = text;
        visualEl.classList.add('glitching');
        
        // 150ms sonra titre≈üimi durdur
        setTimeout(() => {
            visualEl.classList.remove('glitching');
        }, 150);
    }

    // 4. BARMEN ANƒ∞MASYONU (Geli≈ütirilmi≈ü)
    function startBartender() {
        if (animationInterval) clearInterval(animationInterval);
        
        animationInterval = setInterval(() => {
            // Her kare deƒüi≈üiminde hafif bir glitch efekti ver
            // Ama sadece bazen (%30 ihtimalle)
            if (Math.random() > 0.7) {
                visualEl.classList.add('glitching');
                setTimeout(() => visualEl.classList.remove('glitching'), 100);
            }
            
            visualEl.innerHTML = bartenderFrames[frameIndex];
            frameIndex = (frameIndex + 1) % bartenderFrames.length;
        }, 800);
    }

    // 5. ƒ∞√áKƒ∞ G√ñSTERƒ∞Mƒ∞
    function showDrinkArt(glassType) {
        clearInterval(animationInterval); 
        
        // Ekranƒ± "kapatƒ±p a√ßma" efekti
        visualEl.style.opacity = 0;
        statusEl.innerText = "[ ƒ∞≈ûLENƒ∞YOR... ]";
        
        setTimeout(() => {
            let art = document.getElementById('glass-' + glassType);
            if (!art) art = document.getElementById('glass-rocks');
            
            visualEl.innerHTML = art.innerHTML;
            visualEl.style.opacity = 1;
            visualEl.style.color = "var(--ok)"; // Ye≈üil renk
            visualEl.style.textShadow = "0 0 10px var(--ok)";
            visualEl.classList.add('glitching'); // ƒ∞lk a√ßƒ±lƒ±≈üta glitch
            
            setTimeout(() => visualEl.classList.remove('glitching'), 300);
            
            statusEl.innerText = "[ ƒ∞≈ûLEM TAMAM ]";
            statusEl.style.color = "var(--ok)";
            statusEl.style.borderColor = "var(--ok)";
        }, 600);
    }

    // 6. VERƒ∞TABANI (60+ ƒ∞√áKƒ∞)
    const drinksDB = [
        { name: "OLD FASHIONED", glass: "rocks", tags: { mood: "deep", taste: "bitter", intensity: "high" }, desc: "Viskinin en saf hali. D√º≈ü√ºnmek ve yava≈ü yudumlamak i√ßin.", recipe: "‚Ä¢ 6cl Burbon<br>‚Ä¢ 1 K√ºp ≈ûeker<br>‚Ä¢ Angostura Bitters", query: "viski fiyatlarƒ±" },
        { name: "WHISKEY SOUR", glass: "rocks", tags: { mood: "relax", taste: "sour", intensity: "medium" }, desc: "Ek≈üi, tatlƒ± ve sert. ƒ∞peksi bir doku.", recipe: "‚Ä¢ 6cl Viski<br>‚Ä¢ 3cl Limon Suyu<br>‚Ä¢ ≈ûeker ≈ûurubu", query: "viski fiyatlarƒ±" },
        { name: "NEGRONI", glass: "rocks", tags: { mood: "classy", taste: "bitter", intensity: "high" }, desc: "ƒ∞talyan asaleti.", recipe: "‚Ä¢ 3cl Cin<br>‚Ä¢ 3cl Campari<br>‚Ä¢ 3cl Kƒ±rmƒ±zƒ± Vermut", query: "cin campari vermut" },
        { name: "DRY MARTINI", glass: "martini", tags: { mood: "classy", taste: "sour", intensity: "high" }, desc: "Sek ve keskin.", recipe: "‚Ä¢ 6cl Cin<br>‚Ä¢ 1cl Kuru Vermut<br>‚Ä¢ Zeytin", query: "cin vermut fiyat" },
        { name: "GIN TONIC", glass: "highball", tags: { mood: "relax", taste: "sour", intensity: "medium" }, desc: "Basit ve m√ºkemmel.", recipe: "‚Ä¢ 5cl Cin<br>‚Ä¢ 15cl Tonik<br>‚Ä¢ Limon", query: "cin fiyatlarƒ±" },
        { name: "TOM COLLINS", glass: "highball", tags: { mood: "energy", taste: "sour", intensity: "medium" }, desc: "Yeti≈ükin limonatasƒ±.", recipe: "‚Ä¢ 5cl Cin<br>‚Ä¢ 3cl Limon<br>‚Ä¢ ≈ûeker & Soda", query: "cin fiyatlarƒ±" },
        { name: "ESPRESSO MARTINI", glass: "martini", tags: { mood: "energy", taste: "sweet", intensity: "high" }, desc: "Uyandƒ±rƒ±r ve √ßarpar.", recipe: "‚Ä¢ 5cl Votka<br>‚Ä¢ 3cl Kahve Lik√∂r√º<br>‚Ä¢ 1 shot Espresso", query: "votka kahlua fiyat" },
        { name: "MOSCOW MULE", glass: "mule", tags: { mood: "relax", taste: "spicy", intensity: "medium" }, desc: "Zencefil ferahlƒ±ƒüƒ±.", recipe: "‚Ä¢ 5cl Votka<br>‚Ä¢ Zencefil Gazozu<br>‚Ä¢ Limon", query: "votka ginger beer" },
        { name: "MOJITO", glass: "highball", tags: { mood: "energy", taste: "sour", intensity: "medium" }, desc: "Nane ferahlƒ±ƒüƒ±.", recipe: "‚Ä¢ 5cl Rom<br>‚Ä¢ Nane<br>‚Ä¢ ≈ûeker & Soda", query: "beyaz rom fiyat" },
        { name: "DAIQUIRI", glass: "martini", tags: { mood: "classy", taste: "sour", intensity: "high" }, desc: "Sade ve g√º√ßl√º.", recipe: "‚Ä¢ 6cl Rom<br>‚Ä¢ 3cl Limon<br>‚Ä¢ 2cl ≈ûeker", query: "beyaz rom fiyat" },
        { name: "MARGARITA", glass: "martini", tags: { mood: "energy", taste: "sour", intensity: "high" }, desc: "Meksika ate≈üi.", recipe: "‚Ä¢ 5cl Tekila<br>‚Ä¢ Portakal Lik√∂r√º<br>‚Ä¢ Limon & Tuz", query: "tekila fiyatlarƒ±" },
        { name: "TEQUILA SUNRISE", glass: "highball", tags: { mood: "relax", taste: "sweet", intensity: "medium" }, desc: "G√ºn doƒüumu renkleri.", recipe: "‚Ä¢ 5cl Tekila<br>‚Ä¢ Portakal Suyu<br>‚Ä¢ Nar ≈ûurubu", query: "tekila fiyatlarƒ±" },
        { name: "RAKI (DUBLE)", glass: "raki", tags: { mood: "deep", taste: "herbal", intensity: "high" }, desc: "Aslan s√ºt√º.", recipe: "‚Ä¢ Duble Rakƒ±<br>‚Ä¢ Soƒüuk Su<br>‚Ä¢ Peynir & Kavun", query: "rakƒ± fiyatlarƒ±" },
        { name: "JAGER BOMB", glass: "shot", tags: { mood: "rebel", taste: "herbal", intensity: "high" }, desc: "Enerji patlamasƒ±.", recipe: "‚Ä¢ 4cl J√§germeister<br>‚Ä¢ Yarƒ±m kutu Enerji ƒ∞√ßeceƒüi", query: "jagermeister fiyat" },
        { name: "LONG ISLAND", glass: "highball", tags: { mood: "rebel", taste: "sour", intensity: "high" }, desc: "5 √ße≈üit alkol.", recipe: "‚Ä¢ Votka, Cin, Rom, Tekila, Lik√∂r<br>‚Ä¢ Kola", query: "votka cin rom fiyat" },
        { name: "APEROL SPRITZ", glass: "wine", tags: { mood: "relax", taste: "fruity", intensity: "low" }, desc: "ƒ∞talyan aperitifi.", recipe: "‚Ä¢ Prosecco<br>‚Ä¢ Aperol<br>‚Ä¢ Soda", query: "aperol fiyatlarƒ±" }
    ];

    // 7. SORULAR
    const questions = [
        {
            text: "Ho≈ü geldin yabancƒ±. Bug√ºn ruh halin nasƒ±l?",
            options: [
                { label: "Sakinlik / Reset", value: "relax" },
                { label: "Enerjik / Parti", value: "energy" },
                { label: "Dertli / Derin", value: "deep" },
                { label: "Sofistike / ≈ûƒ±k", value: "classy" },
                { label: "Maceracƒ± / Egzotik", value: "adventure" },
                { label: "Asi / Kural Tanƒ±maz", value: "rebel" }
            ],
            key: "mood"
        },
        {
            text: "Damaƒüƒ±nda ne arƒ±yorsun?",
            options: [
                { label: "Ek≈üi ve Ferah", value: "sour" },
                { label: "Acƒ± / Karakterli", value: "bitter" },
                { label: "Tatlƒ± / Yumu≈üak", value: "sweet" },
                { label: "Meyvemsi", value: "fruity" },
                { label: "Kremamsƒ± / Tatlƒ±", value: "creamy" },
                { label: "Baharatlƒ± / Otlu", value: "herbal" },
                { label: "Yakƒ±cƒ± / Zencefil", value: "spicy" }
            ],
            key: "taste"
        },
        {
            text: "Son olarak, sertlik derecesi?",
            options: [
                { label: "Hafif (Keyiflik)", value: "low" },
                { label: "Orta (Standart)", value: "medium" },
                { label: "Sert (√áarpsƒ±n)", value: "high" }
            ],
            key: "intensity"
        }
    ];

    let currentStep = 0;
    let userPrefs = {};

    function updateStatus(text) {
        statusEl.innerText = `[ ${text} ]`;
    }

    // Typewriter Efekti
    function typeWriter(text, i, callback) {
        if (i < text.length) {
            dialogueBox.innerHTML = text.substring(0, i+1) + '<span style="color:var(--accent)">_</span>';
            setTimeout(() => typeWriter(text, i + 1, callback), 20);
        } else {
            dialogueBox.innerHTML = text; 
            if (callback) callback();
        }
    }

    function renderStep() {
        optionsBox.innerHTML = ""; 
        optionsBox.style.opacity = 0; // Fade in i√ßin reset
        
        if (currentStep < questions.length) {
            const q = questions[currentStep];
            updateStatus("Dƒ∞NLƒ∞YOR...");
            
            typeWriter(q.text, 0, () => {
                // Se√ßenekleri olu≈ütur
                q.options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = `> ${opt.label}`;
                    btn.onclick = () => handleSelection(q.key, opt.value);
                    optionsBox.appendChild(btn);
                });
                // Se√ßenekler geldikten sonra g√∂ster
                optionsBox.style.animation = "fadeIn 0.5s forwards";
            });
        } else {
            calculateAndShowResult();
        }
    }

    function handleSelection(key, value) {
        userPrefs[key] = value;
        currentStep++;
        renderStep();
    }

    function calculateAndShowResult() {
        updateStatus("HAZIRLIYOR...");
        typeWriter("Veriler i≈üleniyor... En uygun karƒ±≈üƒ±m taranƒ±yor...", 0, () => {
            setTimeout(() => {
                optionsBox.style.display = 'none'; 
                
                let bestDrink = null;
                let maxScore = -1;

                drinksDB.forEach(drink => {
                    let score = 0;
                    if (drink.tags.mood === userPrefs.mood) score += 5;
                    if (drink.tags.taste === userPrefs.taste) score += 4;
                    if (drink.tags.intensity === userPrefs.intensity) score += 3;
                    score += Math.random() * 2;

                    if (score > maxScore) {
                        maxScore = score;
                        bestDrink = drink;
                    }
                });

                if (!bestDrink) bestDrink = drinksDB[0];
                showResult(bestDrink);
            }, 1000);
        });
    }

    function showResult(drink) {
        showDrinkArt(drink.glass);

        resultArea.style.display = 'block';
        
        document.getElementById('drink-name').innerText = drink.name;
        document.getElementById('drink-description').innerText = drink.desc;
        document.getElementById('drink-recipe').innerHTML = drink.recipe;
        
        const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(drink.query + " 2026")}`;
        const btn = document.getElementById('price-link');
        btn.href = searchUrl;
        
        dialogueBox.innerHTML = `<span style="color:var(--ok)">SERVƒ∞S EDƒ∞LDƒ∞:</span><br>Senin i√ßin en iyi se√ßim: ${drink.name}`;
    }

    // BA≈ûLAT
    window.addEventListener('DOMContentLoaded', () => {
        // ƒ∞lk frame'i y√ºkle
        visualEl.innerHTML = bartenderFrames[0];
        startBartender();
        renderStep();
    });

  </script>
</body>
</html>
