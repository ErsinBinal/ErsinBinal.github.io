<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Barista | Convivium</title>
    <meta name="description" content="Interaktif kahve onerici - ruh halinize gore kahve onerileri.">
    <meta name="author" content="Ersin Binal">
    <link rel="canonical" href="https://ersinbinal.github.io/Barista.html">

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https:;">

    <!-- OpenGraph -->
    <meta property="og:site_name" content="Convivium">
    <meta property="og:title" content="Cyber Barista | Convivium">
    <meta property="og:description" content="Interaktif kahve onerici.">
    <meta property="og:type" content="website">

    <!-- PWA -->
    <meta name="theme-color" content="#d4af37">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/svg+xml" href="/assets/icons/icon.svg">

    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <style>
        /* ============================
           1. CYBERPUNK BASE
           ============================ */
        :root {
            --bg: #12100e;
            --surface: #1f1a17;
            --primary: #d4af37; /* Gold */
            --accent: #ff6b6b; /* Warning Red for Glitch */
            --blue-neon: #00f3ff; /* Tech Blue */
            --text-main: #e0d6cc;
            --text-muted: #8c7b70;
            --font: 'Courier New', Courier, monospace;
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: var(--font);
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        /* Izgara Arka Plan */
        body::before {
            content: ""; position: fixed; inset: 0;
            background-image: 
                linear-gradient(rgba(212, 175, 55, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(212, 175, 55, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            pointer-events: none; z-index: -1;
            mask-image: radial-gradient(circle, black 40%, transparent 90%);
        }

        .container {
            width: 90%; max-width: 500px; text-align: center;
            position: relative; z-index: 10;
            padding-bottom: 40px;
        }

        nav { position: absolute; top: 20px; left: 20px; z-index: 100; }
        nav a { color: var(--text-muted); text-decoration: none; font-size: 0.8rem; text-transform: uppercase; border:1px solid #3e322b; padding:6px 12px; transition:0.3s; background: rgba(0,0,0,0.8); }
        nav a:hover { color: var(--primary); border-color:var(--primary); box-shadow: 0 0 10px var(--primary); }

        /* ============================
           2. GELƒ∞≈ûMƒ∞≈û SAHNE ALANI (HUD)
           ============================ */
        .stage-area {
            height: 340px;
            display: flex;
            align-items: center; justify-content: center;
            position: relative;
            background: radial-gradient(circle at center, #2a201c 0%, #000 80%);
            margin-bottom: 20px;
            border: 1px solid #3e322b;
            border-top: none; border-bottom: 4px solid var(--primary);
            overflow: hidden;
            perspective: 800px; /* 3D efekt i√ßin */
        }

        /* --- KATMAN 1: HOLOGRAFƒ∞K HUD (BEKLEME) --- */
        #layer-idle {
            width: 220px; height: 220px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out; /* Mouse takibi i√ßin */
        }

        /* D√∂nen Halkalar */
        .hud-ring {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            border: 1px solid var(--primary);
            opacity: 0.6;
        }
        .ring-1 { width: 100%; height: 100%; border-style: dashed; animation: spin 10s linear infinite; }
        .ring-2 { width: 80%; height: 80%; border-left-color: transparent; border-right-color: transparent; border-width: 2px; animation: spin-rev 5s linear infinite; }
        .ring-3 { width: 60%; height: 60%; border: 1px dotted var(--blue-neon); animation: spin 15s linear infinite; }

        /* Merkez √áekirdek */
        .hud-core {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 50px; height: 50px;
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid var(--primary);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 0 20px var(--primary);
            animation: pulse-core 2s infinite;
        }

        /* Tarayƒ±cƒ± √áizgi */
        .hud-scanner {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: var(--blue-neon);
            box-shadow: 0 0 10px var(--blue-neon);
            animation: scan-vertical 3s ease-in-out infinite;
            opacity: 0.5;
        }

        /* Veri Metinleri */
        .hud-data {
            position: absolute; width: 100px;
            font-size: 0.6rem; color: var(--blue-neon);
            font-family: monospace;
        }
        .data-tl { top: -20px; left: -40px; text-align: left; }
        .data-br { bottom: -20px; right: -40px; text-align: right; }

        /* --- KATMAN 2: DEMLEME (MAKƒ∞NE) --- */
        #layer-brew {
            position: absolute; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s;
        }
        .portafilter {
            width: 140px; height: 70px;
            background: linear-gradient(90deg, #111, #444, #111);
            border-radius: 5px 5px 35px 35px;
            border: 2px solid #666; border-top: 4px solid #888;
            position: relative; z-index: 2; margin-bottom: -5px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .portafilter::after { /* Sap */
            content: ""; position: absolute; right: -80px; top: 15px;
            width: 80px; height: 20px; background: #222;
            border-radius: 0 10px 10px 0; border: 2px solid #444;
        }
        .coffee-stream-group { display: flex; gap: 5px; justify-content: center; }
        .coffee-stream {
            width: 6px; height: 0;
            background: #3e2723;
            border-radius: 0 0 4px 4px;
            transition: height 0.3s;
            position: relative;
        }
        .stream-active { 
            height: 160px !important; 
            background: linear-gradient(to bottom, #3e2723, #d4af37);
            box-shadow: 0 0 15px var(--primary);
            animation: flow-pulse 0.2s infinite alternate;
        }

        /* --- KATMAN 3: SUNUM (SIVI DOLUM Fƒ∞Zƒ∞ƒûƒ∞) --- */
        #layer-result {
            position: absolute; width: 100%; height: 100%; bottom: 0;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 30px;
            opacity: 0; pointer-events: none; transition: opacity 0.5s;
        }

        /* SVG Bardak */
        .glass-wrapper {
            width: 140px; height: 140px;
            position: relative;
        }
        .coffee-cup-svg {
            width: 100%; height: 100%;
            fill: none; stroke: rgba(255,255,255,0.3); stroke-width: 2;
            z-index: 5; position: relative;
        }
        /* Sƒ±vƒ± Maskesi */
        .liquid-mask {
            position: absolute; bottom: 10px; left: 25px;
            width: 90px; height: 0; /* JS ile artacak */
            background: linear-gradient(to top, #3e2723, #6d4c41);
            transition: height 1.5s ease-out;
            border-radius: 0 0 30px 30px;
            opacity: 0.9;
            z-index: 1;
        }
        .liquid-mask.cold { background: linear-gradient(to top, #5d4037, #d7ccc8); } /* Soƒüuk renk */
        
        /* Baloncuklar */
        .bubble {
            position: absolute; bottom: 0; left: 50%;
            width: 6px; height: 6px; background: rgba(255,255,255,0.4);
            border-radius: 50%;
            animation: rise-bubble 2s infinite;
            opacity: 0;
        }

        /* Buhar */
        .steam-container { position: absolute; top: -40px; left: 30px; width: 80px; height: 60px; pointer-events: none; }
        .steam {
            position: absolute; bottom: 0; width: 15px; height: 30px;
            background: #fff; filter: blur(8px); opacity: 0;
            animation: steam-rise 3s infinite;
        }

        /* --- ANƒ∞MASYON KEYFRAMES --- */
        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes spin-rev { 100% { transform: translate(-50%, -50%) rotate(-360deg); } }
        @keyframes pulse-core { 0%,100% { box-shadow: 0 0 20px var(--primary); transform: translate(-50%, -50%) scale(1); } 50% { box-shadow: 0 0 40px var(--primary); transform: translate(-50%, -50%) scale(1.1); } }
        @keyframes scan-vertical { 0% { top: 0; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
        @keyframes flow-pulse { from { width: 6px; opacity: 0.8; } to { width: 8px; opacity: 1; } }
        @keyframes steam-rise { 0% { transform: translateY(0); opacity: 0; } 50% { opacity: 0.3; } 100% { transform: translateY(-40px); opacity: 0; } }
        @keyframes rise-bubble { 0% { bottom: 0; opacity: 0; } 50% { opacity: 1; } 100% { bottom: 100%; opacity: 0; } }

        /* ============================
           3. UI
           ============================ */
        .dialogue-card { background: var(--surface); border: 1px solid var(--border); border-left: 4px solid var(--primary); padding: 20px; margin-bottom: 20px; text-align: left; min-height: 80px; }
        .dialogue-header { font-size: 0.6rem; color: var(--text-muted); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 8px; display: block; }
        .typing-text { font-size: 1rem; line-height: 1.5; color: var(--text-main); }

        .options-grid { display: grid; grid-template-columns: 1fr; gap: 10px; opacity: 0; animation: fadeIn 0.5s forwards; }
        .option-btn { background: rgba(255,255,255,0.03); border: 1px solid #3e322b; color: #b0a093; padding: 16px; cursor: pointer; font-family: inherit; text-transform: uppercase; font-size: 0.9rem; transition: 0.2s; text-align: left; display: flex; justify-content: space-between; }
        .option-btn:hover { border-color: var(--primary); color: var(--primary); background: rgba(212, 175, 55, 0.05); padding-left: 20px; }
        
        .result-card { display: none; border: 1px solid var(--primary); background: #1a1614; margin-top: 20px; animation: slideUp 0.5s ease; text-align: left; }
        .result-head { background: var(--primary); color: #1a1512; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; font-size: 1.1rem; }
        .result-body { padding: 25px; }
        .tag-row { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .tag { font-size: 0.7rem; background: #3e322b; padding: 4px 8px; border-radius: 4px; color: #ccc; }
        
        .recipe-block { background: rgba(0,0,0,0.2); padding: 15px; border-left: 2px solid var(--accent); margin-bottom: 20px; }
        .recipe-title { color: var(--accent); font-size: 0.8rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .barista-note { font-style: italic; color: #eebb99; font-size: 0.9rem; margin-bottom: 20px; padding: 10px; border: 1px dashed #6f4e37; border-radius: 4px; background: rgba(111, 78, 55, 0.1); }
        .playlist-box { margin-top: 20px; border-top: 1px dashed #3e322b; padding-top: 15px; }
        .song-item { display: flex; align-items: center; font-size: 0.85rem; color: #8c7b70; margin-bottom: 6px; }
        .btn-action { display: block; width: 100%; text-align: center; padding: 14px; margin-top: 15px; text-decoration: none; border: 1px solid var(--border); color: var(--primary); font-weight: bold; transition: 0.3s; background: transparent; }
        .btn-action:hover { background: var(--primary); color: #1a1512; }

        @keyframes fadeIn { to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <nav><a href="index.html">[ ‚Üê ANA MEN√ú ]</a></nav>

    <div class="container">
        
        <div class="stage-area" id="stage-area">
            
            <div id="layer-idle">
                <div class="hud-ring ring-1"></div>
                <div class="hud-ring ring-2"></div>
                <div class="hud-ring ring-3"></div>
                <div class="hud-scanner"></div>
                <div class="hud-core">‚òï</div>
                
                <div class="hud-data data-tl">
                    SYS: ONLINE<br>
                    BAR: 9.0<br>
                    TMP: 93¬∞C
                </div>
                <div class="hud-data data-br">
                    AI: ACTIVE<br>
                    SCANNING...
                </div>
            </div>

            <div id="layer-brew">
                <div class="portafilter"></div>
                <div class="coffee-stream-group">
                    <div class="coffee-stream" id="stream-1"></div>
                    <div class="coffee-stream" id="stream-2"></div>
                </div>
            </div>

            <div id="layer-result">
                <div class="glass-wrapper">
                    <div id="liquid-fill" class="liquid-mask">
                        <div class="bubble" style="left:20%; animation-delay:0s;"></div>
                        <div class="bubble" style="left:50%; animation-delay:1s;"></div>
                        <div class="bubble" style="left:80%; animation-delay:0.5s;"></div>
                    </div>
                    
                    <svg class="coffee-cup-svg" viewBox="0 0 100 100">
                        <path d="M20,30 L25,85 Q26,95 36,95 L64,95 Q74,95 75,85 L80,30 Z" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M78,40 Q95,40 95,55 Q95,70 77,75" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path id="foam-line" d="M21,32 Q50,25 79,32" stroke="white" stroke-width="2" fill="none" style="opacity:0"/>
                    </svg>

                    <div class="steam-container">
                        <div class="steam" style="left:20%; animation-delay:0s;"></div>
                        <div class="steam" style="left:50%; animation-delay:1.5s;"></div>
                        <div class="steam" style="left:40%; animation-delay:0.8s;"></div>
                    </div>
                </div>
            </div>

        </div>

        <div class="dialogue-card">
            <span class="dialogue-header">THE CYBER-BARISTA v3.0</span>
            <div id="dialogue-text" class="typing-text"></div>
        </div>

        <div id="options-area" class="options-grid"></div>

        <div id="result-card" class="result-card">
            <div class="result-head">
                <span id="drink-title"></span>
                <span>MATCHED</span>
            </div>
            <div class="result-body">
                <div class="tag-row">
                    <span class="tag" id="tag-brand"></span>
                    <span class="tag" id="tag-temp"></span>
                    <span class="tag" id="tag-cal"></span>
                </div>

                <p id="drink-desc" style="color:#b0a093; margin-bottom:20px; font-style:italic;"></p>
                
                <div class="recipe-block">
                    <span class="recipe-title">> ƒ∞√áERƒ∞K:</span>
                    <div id="drink-recipe" style="color:#ddd; font-size:0.9rem;"></div>
                </div>

                <div class="barista-note">
                    <strong>üí° Barista T√ºyo:</strong> <span id="drink-tip"></span>
                </div>

                <div class="playlist-box">
                    <span class="recipe-title">> MOOD PLAYLIST:</span>
                    <div id="playlist-container"></div>
                </div>
                
                <button onclick="location.reload()" class="btn-action">YENƒ∞ Sƒ∞PARƒ∞≈û OLU≈ûTUR</button>
            </div>
        </div>
    </div>

    <script>
        // --- ETKƒ∞LE≈ûƒ∞MLƒ∞ MOUSE PARALLAX (HUD) ---
        const stage = document.getElementById('stage-area');
        const hudLayer = document.getElementById('layer-idle');

        stage.addEventListener('mousemove', (e) => {
            const rect = stage.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const xPct = (x / rect.width) - 0.5;
            const yPct = (y / rect.height) - 0.5;

            // 3D D√∂n√º≈ü
            hudLayer.style.transform = `perspective(800px) rotateY(${xPct * 20}deg) rotateX(${yPct * -20}deg)`;
        });

        stage.addEventListener('mouseleave', () => {
            hudLayer.style.transform = `perspective(800px) rotateY(0deg) rotateX(0deg)`;
        });

        // --- VERƒ∞TABANI ---
        const coffeeDB = [
            // STARBUCKS
            { name: "White Chocolate Mocha", brand: "Starbucks", temp: "hot", mood: "indulge", desc: "Beyaz √ßikolata sosu, espresso ve s√ºt√ºn tatlƒ± uyumu.", content: "Espresso (2 shot) + Beyaz √áikolata + S√ºt + Krema", cal: "350 kcal", tip: "√áok tatlƒ± geldiyse 'Half Sweet' (yarƒ±m pompa) isteyin.", playlist: ["Sweater Weather - The Neighbourhood", "Coffee - beabadoobee"] },
            { name: "Caff√® Americano", brand: "Starbucks", temp: "hot", mood: "focus", desc: "Sƒ±cak su ile inceltilmi≈ü yoƒüun espresso.", content: "Espresso (3 shot) + Sƒ±cak Su", cal: "15 kcal", tip: "Daha yumu≈üak i√ßim i√ßin 'Misto' (yarƒ±m su yarƒ±m s√ºt) deneyin.", playlist: ["Deep Focus", "Lo-Fi Beats"] },
            { name: "Iced White Mocha", brand: "Starbucks", temp: "cold", mood: "indulge", desc: "Buzlu beyaz √ßikolata lezzeti.", content: "Espresso + Beyaz √áikolata + S√ºt + Buz", cal: "300 kcal", tip: "Kremasƒ±z isteyerek 100 kalori tasarruf edebilirsiniz.", playlist: ["Summer Vibes", "Watermelon Sugar"] },
            { name: "Cold Brew", brand: "Starbucks", temp: "cold", mood: "energy", desc: "20 saat soƒüuk demlenmi≈ü, yumu≈üak ama g√º√ßl√º.", content: "Soƒüuk Demleme Kahve + Buz", cal: "5 kcal", tip: "Vanilla Sweet Cream ekleterek lezzeti katlayƒ±n.", playlist: ["Work Hard Play Hard", "Power Workout"] },
            { name: "Caramel Macchiato", brand: "Starbucks", temp: "hot", mood: "social", desc: "Vanilya ≈üurubu, s√ºt ve √ºzerine espresso ile karamel.", content: "S√ºt + Vanilya + Espresso + Karamel Sos", cal: "250 kcal", tip: "Karƒ±≈ütƒ±rmadan i√ßin, her yudumda farklƒ± katmanƒ± tadƒ±n.", playlist: ["Pop Hits", "Happy Mood"] },
            { name: "Cool Lime Refresha", brand: "Starbucks", temp: "cold", mood: "fit", desc: "Ger√ßek misket limonu √∂z√ºyle ferahlatƒ±cƒ±.", content: "Lime √ñz√º + Su + Kurutulmu≈ü Limon + Buz", cal: "90 kcal", tip: "Su yerine Hindistan Cevizi s√ºt√ºyle isteyin (Pink Drink tarzƒ±).", playlist: ["Tropical House", "Poolside"] },

            // ESPRESSOLAB
            { name: "Lotus Latte", brand: "Espressolab", temp: "hot", mood: "indulge", desc: "Karamelize bisk√ºvi tadƒ±nda latte.", content: "Lotus Ezmesi + Espresso + S√ºt + Bisk√ºvi", cal: "380 kcal", tip: "Yulaf s√ºt√ºyle i√ßerseniz bisk√ºvi tadƒ± daha √ßok ortaya √ßƒ±kar.", playlist: ["Cozy Autumn", "Dream A Little Dream"] },
            { name: "Cortado", brand: "Espressolab", temp: "hot", mood: "focus", desc: "E≈üit oranda espresso ve s√ºt.", content: "Espresso + S√ºt (1:1 Oran)", cal: "60 kcal", tip: "Sabah uyanamayanlar i√ßin ideal doz.", playlist: ["Indie Folk", "Acoustic Covers"] },
            { name: "Iced Lotus Latte", brand: "Espressolab", temp: "cold", mood: "indulge", desc: "Buzlu Lotus lezzeti.", content: "Lotus Ezmesi + Espresso + S√ºt + Buz", cal: "350 kcal", tip: "Ekstra bisk√ºvi kƒ±rƒ±ntƒ±sƒ± istemeyi unutmayƒ±n.", playlist: ["Chill Hits", "Good Vibes Only"] },
            { name: "Chemex", brand: "Espressolab", temp: "hot", mood: "melancholy", desc: "√ñzel filtreleme ile berrak ve aromatik.", content: "Single Origin Kahve √áekirdeƒüi + Sƒ±cak Su", cal: "5 kcal", tip: "≈ûeker atmayƒ±n, kahvenin meyvemsi notalarƒ±nƒ± ke≈üfedin.", playlist: ["Bon Iver", "Rainy Day Jazz"] },

            // CAFFE NERO
            { name: "Cappuccino", brand: "Caff√® Nero", temp: "hot", mood: "relax", desc: "Bol k√∂p√ºkl√º ƒ∞talyan klasiƒüi.", content: "Espresso + S√ºt + Bol K√∂p√ºk + Kakao", cal: "110 kcal", tip: "Ekstra sƒ±cak isteyin, k√∂p√ºƒü√º daha uzun s√ºre dayanƒ±r.", playlist: ["Italian Coffee House", "Dean Martin"] },
            { name: "Flat White", brand: "Caff√® Nero", temp: "hot", mood: "focus", desc: "ƒ∞nce k√∂p√ºkl√º, yoƒüun kahve tadƒ±.", content: "Ristretto (2 shot) + S√ºt", cal: "90 kcal", tip: "Kƒ±sa ve yoƒüun bir mola i√ßin en iyi se√ßenek.", playlist: ["Morning Focus", "Jazz Vibes"] },
            { name: "Milano Hot Chocolate", brand: "Caff√® Nero", temp: "hot", mood: "melancholy", desc: "Erimi≈ü √ßikolata kƒ±vamƒ±nda yoƒüun lezzet.", content: "√áikolata + S√ºt + Krema", cal: "400 kcal", tip: "Naneli ≈üurup ekleterek 'After Eight' tadƒ± yakalayabilirsiniz.", playlist: ["Winter Wonderland", "Comfort Songs"] },

            // KAHVE D√úNYASI
            { name: "T√ºrk Kahvesi", brand: "Kahve D√ºnyasƒ±", temp: "hot", mood: "relax", desc: "Geleneksel, telveli ve yoƒüun.", content: "T√ºrk Kahvesi + Su (+≈ûeker)", cal: "20 kcal", tip: "Yanƒ±nda mutlaka √ßifte kavrulmu≈ü lokum yiyin.", playlist: ["Zeki M√ºren", "Klasik T√ºrk M√ºziƒüi"] },
            { name: "Soƒüuk T√ºrk Kahvesi", brand: "Kahve D√ºnyasƒ±", temp: "cold", mood: "energy", desc: "Modern ve serinletici.", content: "T√ºrk Kahvesi + S√ºt + Buz", cal: "120 kcal", tip: "Damla sakƒ±zlƒ± versiyonunu denediniz mi?", playlist: ["Modern Pop", "Yaz Hitleri"] },
            { name: "Filtre Kahve", brand: "Kahve D√ºnyasƒ±", temp: "hot", mood: "fit", desc: "Sade, taze demlenmi≈ü ve ≈üekersiz.", content: "Filtre Kahve + Sƒ±cak Su", cal: "5 kcal", tip: "S√ºt tozu yerine az miktarda ger√ßek s√ºt kullanƒ±n.", playlist: ["Focus Flow", "Deep House"] },

            // TCHIBO
            { name: "Davids Kaffee", brand: "Tchibo", temp: "hot", mood: "focus", desc: "Alman usul√º, yoƒüun ve asiditesi d√º≈ü√ºk.", content: "%100 Arabica Filtre Kahve", cal: "5 kcal", tip: "Yanƒ±nda Tchibo'nun Brezellerinden birini alƒ±n.", playlist: ["Classical Essentials", "Piano Study"] },
            { name: "Mazagran", brand: "Tchibo", temp: "cold", mood: "energy", desc: "Limonlu ve konyaklƒ± (opsiyonel) buzlu kahve.", content: "Espresso + Limon + Buz + ≈ûeker", cal: "120 kcal", tip: "√áok ferahlatƒ±cƒ±dƒ±r, yazƒ±n vazge√ßilmezi.", playlist: ["Upbeat Funk", "Summer Drive"] },

            // CARIBOU COFFEE
            { name: "Turtle Mocha", brand: "Caribou Coffee", temp: "hot", mood: "indulge", desc: "√áikolata, karamel ve fƒ±ndƒ±k √º√ßl√ºs√º.", content: "Espresso + √áikolata + Karamel + Fƒ±ndƒ±k + Krema", cal: "450 kcal", tip: "Bitter √ßikolata ile yapƒ±lƒ±rsa tadƒ± dengelenir.", playlist: ["Pop Rock", "Road Trip"] },
            { name: "Mint Condition", brand: "Caribou Coffee", temp: "hot", mood: "melancholy", desc: "Nane ferahlƒ±ƒüƒ± ve √ßikolata sƒ±caklƒ±ƒüƒ±.", content: "Espresso + Nane ≈ûurubu + √áikolata + S√ºt", cal: "380 kcal", tip: "Soƒüuk g√ºnlerde boƒüazƒ± yumu≈üatƒ±r.", playlist: ["Indie Chill", "Acoustic Pop"] }
        ];

        // --- AKI≈û ---
        const questions = [
            { text: "Konumunu bildir: Hangi d√ºkkandasƒ±n?", key: "brand", options: [ { l: "Starbucks", v: "Starbucks" }, { l: "EspressoLab", v: "Espressolab" }, { l: "Caff√® Nero", v: "Caff√® Nero" }, { l: "Kahve D√ºnyasƒ±", v: "Kahve D√ºnyasƒ±" }, { l: "Tchibo", v: "Tchibo" }, { l: "Caribou", v: "Caribou Coffee" } ] },
            { text: "Sƒ±caklƒ±k tercihin?", key: "temp", options: [ { l: "Sƒ±cak (Isƒ±nmak istiyorum)", v: "hot" }, { l: "Soƒüuk (Ferahlamak istiyorum)", v: "cold" } ] },
            { text: "≈ûu anki modun nedir?", key: "mood", options: [ { l: "Enerji / Uyan", v: "energy" }, { l: "Keyif / ≈ûƒ±mart Beni", v: "indulge" }, { l: "Odaklanma / ƒ∞≈ü", v: "focus" }, { l: "Rahatlama / Mola", v: "relax" }, { l: "Fit / Hafif", v: "fit" }, { l: "Melankolik / Duygusal", v: "melancholy" }, { l: "Sosyal / Sohbet", v: "social" } ] }
        ];

        let currentStep = 0;
        let userPrefs = {};

        const dialogue = document.getElementById('dialogue-text');
        const optArea = document.getElementById('options-area');
        const layerIdle = document.getElementById('layer-idle');
        const layerBrew = document.getElementById('layer-brew');
        const layerResult = document.getElementById('layer-result');
        const streams = [document.getElementById('stream-1'), document.getElementById('stream-2')];
        const liquidFill = document.getElementById('liquid-fill');
        const foamLine = document.getElementById('foam-line');
        const resultCard = document.getElementById('result-card');

        function type(txt, cb) {
            dialogue.textContent = "";
            let i = 0;
            let timer = setInterval(() => {
                dialogue.textContent += txt.charAt(i); i++;
                if (i >= txt.length) { clearInterval(timer); if(cb) cb(); }
            }, 20);
        }

        function renderStep() {
            optArea.innerHTML = "";
            if(currentStep < questions.length) {
                const q = questions[currentStep];
                type(q.text, () => {
                    q.options.forEach(o => {
                        const btn = document.createElement('button');
                        btn.className = 'option-btn';
                        btn.innerHTML = `<span>> ${o.l}</span>`;
                        btn.onclick = () => { userPrefs[q.key] = o.v; currentStep++; renderStep(); };
                        optArea.appendChild(btn);
                    });
                    optArea.style.animation = "fadeIn 0.5s forwards";
                });
            } else { calculate(); }
        }

        function calculate() {
            optArea.style.display = "none";
            layerIdle.style.opacity = 0; 
            setTimeout(() => { layerIdle.style.display = "none"; }, 500);
            
            layerBrew.style.opacity = 1;
            
            type("Sipari≈ü i≈üleniyor... Barista hazƒ±rlƒ±yor...", () => {
                // Akƒ±≈ü Ba≈ülasƒ±n
                setTimeout(() => { 
                    streams.forEach(s => s.classList.add('stream-active'));
                }, 500);

                setTimeout(() => {
                    let best = coffeeDB.find(c => c.brand === userPrefs.brand && c.temp === userPrefs.temp && c.mood === userPrefs.mood);
                    if (!best) { best = coffeeDB.find(c => c.brand === userPrefs.brand && c.temp === userPrefs.temp) || coffeeDB[0]; }
                    showResult(best);
                }, 2500);
            });
        }

        function showResult(coffee) {
            streams.forEach(s => s.classList.remove('stream-active'));
            layerBrew.style.opacity = 0;
            
            setTimeout(() => { 
                layerResult.style.opacity = 1;
                
                // Dolum Animasyonu
                liquidFill.style.height = "90px"; 
                if(coffee.temp === "cold") liquidFill.classList.add("cold");
                
                setTimeout(() => {
                    foamLine.style.opacity = 1; // K√∂p√ºk belirmesi
                }, 1200);

            }, 500);

            resultCard.style.display = "block";
            document.getElementById('drink-title').innerText = coffee.name;
            document.getElementById('tag-brand').innerText = coffee.brand;
            document.getElementById('tag-temp').innerText = coffee.temp === "hot" ? "SICAK" : "SOƒûUK";
            document.getElementById('tag-cal').innerText = coffee.cal;
            document.getElementById('drink-desc').innerText = coffee.desc;
            document.getElementById('drink-recipe').innerText = coffee.content;
            document.getElementById('drink-tip').innerText = coffee.tip;

            const plBox = document.getElementById('playlist-container');
            plBox.innerHTML = "";
            coffee.playlist.forEach(song => { plBox.innerHTML += `<div class="song-item"><span class="song-icon">‚ô™</span> ${song}</div>`; });

            dialogue.textContent = "Hazƒ±r. M√ºkemmel sƒ±caklƒ±kta.";
            
            const ytLink = document.createElement('div');
            ytLink.style.marginTop = "15px";
            ytLink.innerHTML = `<a href="https://www.youtube.com/watch?v=uJaYCTCvOcA" target="_blank" style="color:var(--primary); font-size:0.8rem;">[ üéß Ortam Sesi: Coffee Shop Jazz ]</a>`;
            plBox.appendChild(ytLink);
        }

        window.onload = () => { renderStep(); };
    </script>
</body>
</html>
